{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"./databaseWrapper","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":39,"index":39}}],"key":"MUXmcyigDhda3+oXopwCcUAp8ZU=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":40},"end":{"line":2,"column":39,"index":79}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.migrateDataFromBackend = migrateDataFromBackend;\n  exports.checkMigrationNeeded = checkMigrationNeeded;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _databaseWrapper = require(_dependencyMap[1], \"./databaseWrapper\");\n  var _expoConstants = require(_dependencyMap[2], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  const BACKEND_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  async function migrateDataFromBackend() {\n    try {\n      console.log('üîÑ Starting data migration from backend...');\n\n      // Fetch all data from backend\n      const response = await fetch(`${BACKEND_URL}/api/export`);\n      if (!response.ok) {\n        throw new Error(`Backend export failed: ${response.statusText}`);\n      }\n      const backendData = await response.json();\n      console.log(`üì¶ Fetched ${backendData.time_entries?.length || 0} time entries`);\n      console.log(`üì¶ Fetched ${backendData.line_codes?.length || 0} line codes`);\n      console.log(`üì¶ Fetched ${backendData.settings?.length || 0} settings`);\n\n      // Import data into local database\n      await _databaseWrapper.db.importData(backendData);\n      console.log('‚úÖ Migration completed successfully');\n      return {\n        success: true,\n        message: `Migrated ${backendData.time_entries?.length || 0} time entries from server`\n      };\n    } catch (error) {\n      console.error('‚ùå Migration failed:', error);\n      return {\n        success: false,\n        message: `Migration failed: ${error.message}`\n      };\n    }\n  }\n  async function checkMigrationNeeded() {\n    try {\n      // Check if local database has any time entries\n      const entries = await _databaseWrapper.db.getAllLines();\n\n      // If we have default lines but no custom data, migration might be needed\n      // This is a simple check - you might want to add more sophisticated logic\n      return entries.length <= 10; // Only default lines exist\n    } catch (error) {\n      console.error('Error checking migration status:', error);\n      return false;\n    }\n  }\n});","lineCount":61,"map":[[12,2,6,0,"exports"],[12,9,6,0],[12,10,6,0,"migrateDataFromBackend"],[12,32,6,0],[12,35,6,0,"migrateDataFromBackend"],[12,57,6,0],[13,2,41,0,"exports"],[13,9,41,0],[13,10,41,0,"checkMigrationNeeded"],[13,30,41,0],[13,33,41,0,"checkMigrationNeeded"],[13,53,41,0],[14,2,53,1],[14,6,53,1,"_expoVirtualEnv"],[14,21,53,1],[14,24,53,1,"require"],[14,31,53,1],[14,32,53,1,"_dependencyMap"],[14,46,53,1],[15,2,1,0],[15,6,1,0,"_databaseWrapper"],[15,22,1,0],[15,25,1,0,"require"],[15,32,1,0],[15,33,1,0,"_dependencyMap"],[15,47,1,0],[16,2,2,0],[16,6,2,0,"_expoConstants"],[16,20,2,0],[16,23,2,0,"require"],[16,30,2,0],[16,31,2,0,"_dependencyMap"],[16,45,2,0],[17,2,2,0],[17,6,2,0,"Constants"],[17,15,2,0],[17,18,2,0,"_interopDefault"],[17,33,2,0],[17,34,2,0,"_expoConstants"],[17,48,2,0],[18,2,4,0],[18,8,4,6,"BACKEND_URL"],[18,19,4,17],[18,22,4,20,"Constants"],[18,31,4,29],[18,32,4,29,"default"],[18,39,4,29],[18,40,4,30,"expoConfig"],[18,50,4,40],[18,52,4,42,"extra"],[18,57,4,47],[18,59,4,49,"EXPO_PUBLIC_BACKEND_URL"],[18,82,4,72],[18,86,4,72,"_expoVirtualEnv"],[18,101,4,72],[18,102,4,72,"env"],[18,105,4,72],[18,106,4,72,"EXPO_PUBLIC_BACKEND_URL"],[18,129,4,111],[18,133,4,115],[18,135,4,117],[19,2,6,7],[19,17,6,22,"migrateDataFromBackend"],[19,39,6,44,"migrateDataFromBackend"],[19,40,6,44],[19,42,6,95],[20,4,7,2],[20,8,7,6],[21,6,8,4,"console"],[21,13,8,11],[21,14,8,12,"log"],[21,17,8,15],[21,18,8,16],[21,62,8,60],[21,63,8,61],[23,6,10,4],[24,6,11,4],[24,12,11,10,"response"],[24,20,11,18],[24,23,11,21],[24,29,11,27,"fetch"],[24,34,11,32],[24,35,11,33],[24,38,11,36,"BACKEND_URL"],[24,49,11,47],[24,62,11,60],[24,63,11,61],[25,6,13,4],[25,10,13,8],[25,11,13,9,"response"],[25,19,13,17],[25,20,13,18,"ok"],[25,22,13,20],[25,24,13,22],[26,8,14,6],[26,14,14,12],[26,18,14,16,"Error"],[26,23,14,21],[26,24,14,22],[26,50,14,48,"response"],[26,58,14,56],[26,59,14,57,"statusText"],[26,69,14,67],[26,71,14,69],[26,72,14,70],[27,6,15,4],[28,6,17,4],[28,12,17,10,"backendData"],[28,23,17,21],[28,26,17,24],[28,32,17,30,"response"],[28,40,17,38],[28,41,17,39,"json"],[28,45,17,43],[28,46,17,44],[28,47,17,45],[29,6,19,4,"console"],[29,13,19,11],[29,14,19,12,"log"],[29,17,19,15],[29,18,19,16],[29,32,19,30,"backendData"],[29,43,19,41],[29,44,19,42,"time_entries"],[29,56,19,54],[29,58,19,56,"length"],[29,64,19,62],[29,68,19,66],[29,69,19,67],[29,84,19,82],[29,85,19,83],[30,6,20,4,"console"],[30,13,20,11],[30,14,20,12,"log"],[30,17,20,15],[30,18,20,16],[30,32,20,30,"backendData"],[30,43,20,41],[30,44,20,42,"line_codes"],[30,54,20,52],[30,56,20,54,"length"],[30,62,20,60],[30,66,20,64],[30,67,20,65],[30,80,20,78],[30,81,20,79],[31,6,21,4,"console"],[31,13,21,11],[31,14,21,12,"log"],[31,17,21,15],[31,18,21,16],[31,32,21,30,"backendData"],[31,43,21,41],[31,44,21,42,"settings"],[31,52,21,50],[31,54,21,52,"length"],[31,60,21,58],[31,64,21,62],[31,65,21,63],[31,76,21,74],[31,77,21,75],[33,6,23,4],[34,6,24,4],[34,12,24,10,"db"],[34,28,24,12],[34,29,24,12,"db"],[34,31,24,12],[34,32,24,13,"importData"],[34,42,24,23],[34,43,24,24,"backendData"],[34,54,24,35],[34,55,24,36],[35,6,26,4,"console"],[35,13,26,11],[35,14,26,12,"log"],[35,17,26,15],[35,18,26,16],[35,54,26,52],[35,55,26,53],[36,6,28,4],[36,13,28,11],[37,8,29,6,"success"],[37,15,29,13],[37,17,29,15],[37,21,29,19],[38,8,30,6,"message"],[38,15,30,13],[38,17,30,15],[38,29,30,27,"backendData"],[38,40,30,38],[38,41,30,39,"time_entries"],[38,53,30,51],[38,55,30,53,"length"],[38,61,30,59],[38,65,30,63],[38,66,30,64],[39,6,31,4],[39,7,31,5],[40,4,32,2],[40,5,32,3],[40,6,32,4],[40,13,32,11,"error"],[40,18,32,16],[40,20,32,18],[41,6,33,4,"console"],[41,13,33,11],[41,14,33,12,"error"],[41,19,33,17],[41,20,33,18],[41,41,33,39],[41,43,33,41,"error"],[41,48,33,46],[41,49,33,47],[42,6,34,4],[42,13,34,11],[43,8,35,6,"success"],[43,15,35,13],[43,17,35,15],[43,22,35,20],[44,8,36,6,"message"],[44,15,36,13],[44,17,36,15],[44,38,36,36,"error"],[44,43,36,41],[44,44,36,42,"message"],[44,51,36,49],[45,6,37,4],[45,7,37,5],[46,4,38,2],[47,2,39,0],[48,2,41,7],[48,17,41,22,"checkMigrationNeeded"],[48,37,41,42,"checkMigrationNeeded"],[48,38,41,42],[48,40,41,63],[49,4,42,2],[49,8,42,6],[50,6,43,4],[51,6,44,4],[51,12,44,10,"entries"],[51,19,44,17],[51,22,44,20],[51,28,44,26,"db"],[51,44,44,28],[51,45,44,28,"db"],[51,47,44,28],[51,48,44,29,"getAllLines"],[51,59,44,40],[51,60,44,41],[51,61,44,42],[53,6,46,4],[54,6,47,4],[55,6,48,4],[55,13,48,11,"entries"],[55,20,48,18],[55,21,48,19,"length"],[55,27,48,25],[55,31,48,29],[55,33,48,31],[55,34,48,32],[55,35,48,33],[56,4,49,2],[56,5,49,3],[56,6,49,4],[56,13,49,11,"error"],[56,18,49,16],[56,20,49,18],[57,6,50,4,"console"],[57,13,50,11],[57,14,50,12,"error"],[57,19,50,17],[57,20,50,18],[57,54,50,52],[57,56,50,54,"error"],[57,61,50,59],[57,62,50,60],[58,6,51,4],[58,13,51,11],[58,18,51,16],[59,4,52,2],[60,2,53,0],[61,0,53,1],[61,3]],"functionMap":{"names":["<global>","migrateDataFromBackend","checkMigrationNeeded"],"mappings":"AAA;OCK;CDiC;OEE;CFY"},"hasCjsExports":false},"type":"js/module"}]}