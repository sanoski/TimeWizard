{"dependencies":[{"name":"./database","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":32,"index":32}}],"key":"V1SMgJ2bTcRcXvD7is8Q1Lbg5bU=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":33},"end":{"line":2,"column":39,"index":72}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.migrateDataFromBackend = migrateDataFromBackend;\n  exports.checkMigrationNeeded = checkMigrationNeeded;\n  var _database = require(_dependencyMap[0], \"./database\");\n  var _expoConstants = require(_dependencyMap[1], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  const BACKEND_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || process.env.EXPO_PUBLIC_BACKEND_URL || '';\n  async function migrateDataFromBackend() {\n    try {\n      console.log('üîÑ Starting data migration from backend...');\n\n      // Fetch all data from backend\n      const response = await fetch(`${BACKEND_URL}/api/export`);\n      if (!response.ok) {\n        throw new Error(`Backend export failed: ${response.statusText}`);\n      }\n      const backendData = await response.json();\n      console.log(`üì¶ Fetched ${backendData.time_entries?.length || 0} time entries`);\n      console.log(`üì¶ Fetched ${backendData.line_codes?.length || 0} line codes`);\n      console.log(`üì¶ Fetched ${backendData.settings?.length || 0} settings`);\n\n      // Import data into local database\n      await _database.db.importData(backendData);\n      console.log('‚úÖ Migration completed successfully');\n      return {\n        success: true,\n        message: `Migrated ${backendData.time_entries?.length || 0} time entries from server`\n      };\n    } catch (error) {\n      console.error('‚ùå Migration failed:', error);\n      return {\n        success: false,\n        message: `Migration failed: ${error.message}`\n      };\n    }\n  }\n  async function checkMigrationNeeded() {\n    try {\n      // Check if local database has any time entries\n      const entries = await _database.db.getAllLines();\n\n      // If we have default lines but no custom data, migration might be needed\n      // This is a simple check - you might want to add more sophisticated logic\n      return entries.length <= 10; // Only default lines exist\n    } catch (error) {\n      console.error('Error checking migration status:', error);\n      return false;\n    }\n  }\n});","lineCount":60,"map":[[12,2,6,0,"exports"],[12,9,6,0],[12,10,6,0,"migrateDataFromBackend"],[12,32,6,0],[12,35,6,0,"migrateDataFromBackend"],[12,57,6,0],[13,2,41,0,"exports"],[13,9,41,0],[13,10,41,0,"checkMigrationNeeded"],[13,30,41,0],[13,33,41,0,"checkMigrationNeeded"],[13,53,41,0],[14,2,1,0],[14,6,1,0,"_database"],[14,15,1,0],[14,18,1,0,"require"],[14,25,1,0],[14,26,1,0,"_dependencyMap"],[14,40,1,0],[15,2,2,0],[15,6,2,0,"_expoConstants"],[15,20,2,0],[15,23,2,0,"require"],[15,30,2,0],[15,31,2,0,"_dependencyMap"],[15,45,2,0],[16,2,2,0],[16,6,2,0,"Constants"],[16,15,2,0],[16,18,2,0,"_interopDefault"],[16,33,2,0],[16,34,2,0,"_expoConstants"],[16,48,2,0],[17,2,4,0],[17,8,4,6,"BACKEND_URL"],[17,19,4,17],[17,22,4,20,"Constants"],[17,31,4,29],[17,32,4,29,"default"],[17,39,4,29],[17,40,4,30,"expoConfig"],[17,50,4,40],[17,52,4,42,"extra"],[17,57,4,47],[17,59,4,49,"EXPO_PUBLIC_BACKEND_URL"],[17,82,4,72],[17,86,4,76,"process"],[17,93,4,83],[17,94,4,84,"env"],[17,97,4,87],[17,98,4,88,"EXPO_PUBLIC_BACKEND_URL"],[17,121,4,111],[17,125,4,115],[17,127,4,117],[18,2,6,7],[18,17,6,22,"migrateDataFromBackend"],[18,39,6,44,"migrateDataFromBackend"],[18,40,6,44],[18,42,6,95],[19,4,7,2],[19,8,7,6],[20,6,8,4,"console"],[20,13,8,11],[20,14,8,12,"log"],[20,17,8,15],[20,18,8,16],[20,62,8,60],[20,63,8,61],[22,6,10,4],[23,6,11,4],[23,12,11,10,"response"],[23,20,11,18],[23,23,11,21],[23,29,11,27,"fetch"],[23,34,11,32],[23,35,11,33],[23,38,11,36,"BACKEND_URL"],[23,49,11,47],[23,62,11,60],[23,63,11,61],[24,6,13,4],[24,10,13,8],[24,11,13,9,"response"],[24,19,13,17],[24,20,13,18,"ok"],[24,22,13,20],[24,24,13,22],[25,8,14,6],[25,14,14,12],[25,18,14,16,"Error"],[25,23,14,21],[25,24,14,22],[25,50,14,48,"response"],[25,58,14,56],[25,59,14,57,"statusText"],[25,69,14,67],[25,71,14,69],[25,72,14,70],[26,6,15,4],[27,6,17,4],[27,12,17,10,"backendData"],[27,23,17,21],[27,26,17,24],[27,32,17,30,"response"],[27,40,17,38],[27,41,17,39,"json"],[27,45,17,43],[27,46,17,44],[27,47,17,45],[28,6,19,4,"console"],[28,13,19,11],[28,14,19,12,"log"],[28,17,19,15],[28,18,19,16],[28,32,19,30,"backendData"],[28,43,19,41],[28,44,19,42,"time_entries"],[28,56,19,54],[28,58,19,56,"length"],[28,64,19,62],[28,68,19,66],[28,69,19,67],[28,84,19,82],[28,85,19,83],[29,6,20,4,"console"],[29,13,20,11],[29,14,20,12,"log"],[29,17,20,15],[29,18,20,16],[29,32,20,30,"backendData"],[29,43,20,41],[29,44,20,42,"line_codes"],[29,54,20,52],[29,56,20,54,"length"],[29,62,20,60],[29,66,20,64],[29,67,20,65],[29,80,20,78],[29,81,20,79],[30,6,21,4,"console"],[30,13,21,11],[30,14,21,12,"log"],[30,17,21,15],[30,18,21,16],[30,32,21,30,"backendData"],[30,43,21,41],[30,44,21,42,"settings"],[30,52,21,50],[30,54,21,52,"length"],[30,60,21,58],[30,64,21,62],[30,65,21,63],[30,76,21,74],[30,77,21,75],[32,6,23,4],[33,6,24,4],[33,12,24,10,"db"],[33,21,24,12],[33,22,24,12,"db"],[33,24,24,12],[33,25,24,13,"importData"],[33,35,24,23],[33,36,24,24,"backendData"],[33,47,24,35],[33,48,24,36],[34,6,26,4,"console"],[34,13,26,11],[34,14,26,12,"log"],[34,17,26,15],[34,18,26,16],[34,54,26,52],[34,55,26,53],[35,6,28,4],[35,13,28,11],[36,8,29,6,"success"],[36,15,29,13],[36,17,29,15],[36,21,29,19],[37,8,30,6,"message"],[37,15,30,13],[37,17,30,15],[37,29,30,27,"backendData"],[37,40,30,38],[37,41,30,39,"time_entries"],[37,53,30,51],[37,55,30,53,"length"],[37,61,30,59],[37,65,30,63],[37,66,30,64],[38,6,31,4],[38,7,31,5],[39,4,32,2],[39,5,32,3],[39,6,32,4],[39,13,32,11,"error"],[39,18,32,16],[39,20,32,18],[40,6,33,4,"console"],[40,13,33,11],[40,14,33,12,"error"],[40,19,33,17],[40,20,33,18],[40,41,33,39],[40,43,33,41,"error"],[40,48,33,46],[40,49,33,47],[41,6,34,4],[41,13,34,11],[42,8,35,6,"success"],[42,15,35,13],[42,17,35,15],[42,22,35,20],[43,8,36,6,"message"],[43,15,36,13],[43,17,36,15],[43,38,36,36,"error"],[43,43,36,41],[43,44,36,42,"message"],[43,51,36,49],[44,6,37,4],[44,7,37,5],[45,4,38,2],[46,2,39,0],[47,2,41,7],[47,17,41,22,"checkMigrationNeeded"],[47,37,41,42,"checkMigrationNeeded"],[47,38,41,42],[47,40,41,63],[48,4,42,2],[48,8,42,6],[49,6,43,4],[50,6,44,4],[50,12,44,10,"entries"],[50,19,44,17],[50,22,44,20],[50,28,44,26,"db"],[50,37,44,28],[50,38,44,28,"db"],[50,40,44,28],[50,41,44,29,"getAllLines"],[50,52,44,40],[50,53,44,41],[50,54,44,42],[52,6,46,4],[53,6,47,4],[54,6,48,4],[54,13,48,11,"entries"],[54,20,48,18],[54,21,48,19,"length"],[54,27,48,25],[54,31,48,29],[54,33,48,31],[54,34,48,32],[54,35,48,33],[55,4,49,2],[55,5,49,3],[55,6,49,4],[55,13,49,11,"error"],[55,18,49,16],[55,20,49,18],[56,6,50,4,"console"],[56,13,50,11],[56,14,50,12,"error"],[56,19,50,17],[56,20,50,18],[56,54,50,52],[56,56,50,54,"error"],[56,61,50,59],[56,62,50,60],[57,6,51,4],[57,13,51,11],[57,18,51,16],[58,4,52,2],[59,2,53,0],[60,0,53,1],[60,3]],"functionMap":{"names":["<global>","migrateDataFromBackend","checkMigrationNeeded"],"mappings":"AAA;OCK;CDiC;OEE;CFY"},"hasCjsExports":false},"type":"js/module"}]}