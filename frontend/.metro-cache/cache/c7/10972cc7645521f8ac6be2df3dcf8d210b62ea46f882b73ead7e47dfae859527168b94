{"dependencies":[{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":117},"end":{"line":6,"column":69,"index":186}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"./databaseWrapper","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":187},"end":{"line":7,"column":39,"index":226}}],"key":"MUXmcyigDhda3+oXopwCcUAp8ZU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.isAutoSyncEnabled = isAutoSyncEnabled;\n  exports.setAutoSyncEnabled = setAutoSyncEnabled;\n  exports.getLastSyncTime = getLastSyncTime;\n  exports.isSyncNeeded = isSyncNeeded;\n  exports.checkAndSync = checkAndSync;\n  exports.clearSyncBadge = clearSyncBadge;\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[0], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _databaseWrapper = require(_dependencyMap[1], \"./databaseWrapper\");\n  /**\n   * Auto-Sync Service for On-Call Schedule\n   * Automatically syncs schedule from Google Sheets when app opens\n   */\n\n  const LAST_SYNC_KEY = 'last_oncall_sync';\n  const AUTO_SYNC_ENABLED_KEY = 'auto_sync_enabled';\n  const SYNC_INTERVAL_DAYS = 7; // Sync once per week\n\n  /**\n   * Check if auto-sync is enabled\n   */\n  async function isAutoSyncEnabled() {\n    try {\n      const enabled = await AsyncStorage.default.getItem(AUTO_SYNC_ENABLED_KEY);\n      return enabled === 'true';\n    } catch (error) {\n      console.error('Error checking auto-sync status:', error);\n      return true; // Default to enabled\n    }\n  }\n\n  /**\n   * Enable or disable auto-sync\n   */\n  async function setAutoSyncEnabled(enabled) {\n    try {\n      await AsyncStorage.default.setItem(AUTO_SYNC_ENABLED_KEY, enabled ? 'true' : 'false');\n      console.log(`Auto-sync ${enabled ? 'enabled' : 'disabled'}`);\n    } catch (error) {\n      console.error('Error setting auto-sync status:', error);\n    }\n  }\n\n  /**\n   * Get last sync timestamp\n   */\n  async function getLastSyncTime() {\n    try {\n      const timestamp = await AsyncStorage.default.getItem(LAST_SYNC_KEY);\n      return timestamp ? new Date(timestamp) : null;\n    } catch (error) {\n      console.error('Error getting last sync time:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Check if sync is needed (> 7 days since last sync)\n   */\n  async function isSyncNeeded() {\n    const lastSync = await getLastSyncTime();\n    if (!lastSync) {\n      console.log('‚è∞ No previous sync found, sync needed');\n      return true;\n    }\n    const daysSinceSync = (Date.now() - lastSync.getTime()) / (1000 * 60 * 60 * 24);\n    const needed = daysSinceSync >= SYNC_INTERVAL_DAYS;\n    console.log(`‚è∞ Last sync: ${daysSinceSync.toFixed(1)} days ago, sync ${needed ? 'needed' : 'not needed'}`);\n    return needed;\n  }\n\n  /**\n   * Get user's current shifts before sync\n   */\n  async function getUserShiftsBeforeSync(userName) {\n    try {\n      await _databaseWrapper.db.initialize();\n      const now = new Date();\n      const futureDate = new Date(now.getFullYear() + 1, 11, 31); // End of next year\n\n      const shifts = await _databaseWrapper.db.getOnCallSchedule(now.toISOString().split('T')[0], futureDate.toISOString().split('T')[0]);\n      const userShifts = shifts.filter(s => s.user_name === userName).map(s => `${s.start_date}_${s.end_date}`);\n      return userShifts;\n    } catch (error) {\n      console.error('Error getting user shifts:', error);\n      return [];\n    }\n  }\n\n  /**\n   * Compare shifts to detect changes\n   */\n  function shiftsChanged(before, after) {\n    if (before.length !== after.length) return true;\n    const beforeSet = new Set(before);\n    const afterSet = new Set(after);\n\n    // Check if any shift was added or removed\n    for (const shift of before) {\n      if (!afterSet.has(shift)) return true;\n    }\n    for (const shift of after) {\n      if (!beforeSet.has(shift)) return true;\n    }\n    return false;\n  }\n\n  /**\n   * Perform the actual sync\n   */\n  async function performSync() {\n    try {\n      console.log('üîÑ Starting auto-sync...');\n      await _databaseWrapper.db.initialize();\n\n      // Get current user\n      const currentUser = await _databaseWrapper.db.getCurrentUser();\n      if (!currentUser) {\n        console.log('‚ö†Ô∏è No current user found, skipping sync');\n        return {\n          success: false,\n          newEntriesCount: 0,\n          userShiftsChanged: false,\n          error: 'No user configured'\n        };\n      }\n\n      // Get sync URL\n      const syncUrl = await AsyncStorage.default.getItem('oncall_schedule_url');\n      if (!syncUrl) {\n        console.log('‚ö†Ô∏è No sync URL configured, skipping sync');\n        return {\n          success: false,\n          newEntriesCount: 0,\n          userShiftsChanged: false,\n          error: 'No sync URL'\n        };\n      }\n\n      // Get user's shifts before sync\n      const shiftsBefore = await getUserShiftsBeforeSync(currentUser.user_name);\n      console.log(`üìä User has ${shiftsBefore.length} shifts before sync`);\n\n      // Fetch CSV from URL\n      console.log('üì• Fetching schedule from URL...');\n      const response = await fetch(syncUrl);\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      const csvText = await response.text();\n      console.log('‚úÖ CSV fetched successfully');\n\n      // Parse CSV\n      const lines = csvText.trim().split('\\n');\n      const headers = lines[0].split(',').map(h => h.trim());\n      const scheduleData = [];\n      for (let i = 1; i < lines.length; i++) {\n        const values = lines[i].split(',').map(v => v.trim());\n        const row = {};\n        headers.forEach((header, index) => {\n          row[header] = values[index] || '';\n        });\n        if (row.start_date && row.end_date && row.user) {\n          scheduleData.push({\n            start_date: row.start_date,\n            end_date: row.end_date,\n            user: row.user,\n            notes: row.notes || ''\n          });\n        }\n      }\n      console.log(`üìÖ Parsed ${scheduleData.length} schedule entries`);\n\n      // Clear and import\n      console.log('üóëÔ∏è Clearing existing schedule...');\n      await _databaseWrapper.db.clearOnCallSchedule();\n      await _databaseWrapper.db.importOnCallSchedule(scheduleData);\n\n      // Extract and add unique users\n      const uniqueUsers = [...new Set(scheduleData.map(s => s.user))];\n      for (const user of uniqueUsers) {\n        await _databaseWrapper.db.addOnCallUser(user, false);\n      }\n      console.log('‚úÖ Schedule imported successfully');\n\n      // Get user's shifts after sync\n      const shiftsAfter = await getUserShiftsBeforeSync(currentUser.user_name);\n      console.log(`üìä User has ${shiftsAfter.length} shifts after sync`);\n      const userShiftsChanged = shiftsChanged(shiftsBefore, shiftsAfter);\n      if (userShiftsChanged) {\n        console.log('‚ö†Ô∏è User\\'s shifts have changed!');\n      } else {\n        console.log('‚úÖ User\\'s shifts unchanged');\n      }\n\n      // Update last sync time\n      await AsyncStorage.default.setItem(LAST_SYNC_KEY, new Date().toISOString());\n      return {\n        success: true,\n        newEntriesCount: scheduleData.length,\n        userShiftsChanged\n      };\n    } catch (error) {\n      console.error('‚ùå Auto-sync failed:', error);\n      return {\n        success: false,\n        newEntriesCount: 0,\n        userShiftsChanged: false,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Show notification badge if user's shifts changed\n   * Note: Badge notifications disabled in Expo Go. Will work in standalone builds.\n   */\n  async function notifyUserShiftsChanged() {\n    // Badge notifications require a standalone build\n    // This is a placeholder for future implementation\n    console.log('üì¨ User shifts changed (badge notifications disabled in Expo Go)');\n  }\n\n  /**\n   * Main auto-sync function to call on app open\n   */\n  async function checkAndSync() {\n    try {\n      // Check if auto-sync is enabled\n      const enabled = await isAutoSyncEnabled();\n      if (!enabled) {\n        console.log('‚è∏Ô∏è Auto-sync is disabled');\n        return null;\n      }\n\n      // Check if sync is needed\n      const needed = await isSyncNeeded();\n      if (!needed) {\n        console.log('‚è∏Ô∏è Sync not needed yet');\n        return null;\n      }\n\n      // Perform sync\n      console.log('üîÑ Auto-sync triggered');\n      const result = await performSync();\n\n      // Show badge if user's shifts changed\n      if (result.success && result.userShiftsChanged) {\n        await notifyUserShiftsChanged();\n      }\n      return result;\n    } catch (error) {\n      console.error('‚ùå Auto-sync check failed:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Clear notification badge\n   * Note: Badge notifications disabled in Expo Go. Will work in standalone builds.\n   */\n  async function clearSyncBadge() {\n    // Badge notifications require a standalone build\n    console.log('‚úÖ Badge cleared (disabled in Expo Go)');\n  }\n});","lineCount":277,"map":[[12,2,23,0,"exports"],[12,9,23,0],[12,10,23,0,"isAutoSyncEnabled"],[12,27,23,0],[12,30,23,0,"isAutoSyncEnabled"],[12,47,23,0],[13,2,36,0,"exports"],[13,9,36,0],[13,10,36,0,"setAutoSyncEnabled"],[13,28,36,0],[13,31,36,0,"setAutoSyncEnabled"],[13,49,36,0],[14,2,48,0,"exports"],[14,9,48,0],[14,10,48,0,"getLastSyncTime"],[14,25,48,0],[14,28,48,0,"getLastSyncTime"],[14,43,48,0],[15,2,61,0,"exports"],[15,9,61,0],[15,10,61,0,"isSyncNeeded"],[15,22,61,0],[15,25,61,0,"isSyncNeeded"],[15,37,61,0],[16,2,246,0,"exports"],[16,9,246,0],[16,10,246,0,"checkAndSync"],[16,22,246,0],[16,25,246,0,"checkAndSync"],[16,37,246,0],[17,2,283,0,"exports"],[17,9,283,0],[17,10,283,0,"clearSyncBadge"],[17,24,283,0],[17,27,283,0,"clearSyncBadge"],[17,41,283,0],[18,2,6,0],[18,6,6,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,6,0],[18,45,6,0,"require"],[18,52,6,0],[18,53,6,0,"_dependencyMap"],[18,67,6,0],[19,2,6,0],[19,6,6,0,"AsyncStorage"],[19,18,6,0],[19,21,6,0,"_interopDefault"],[19,36,6,0],[19,37,6,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,6,0],[20,2,7,0],[20,6,7,0,"_databaseWrapper"],[20,22,7,0],[20,25,7,0,"require"],[20,32,7,0],[20,33,7,0,"_dependencyMap"],[20,47,7,0],[21,2,1,0],[22,0,2,0],[23,0,3,0],[24,0,4,0],[26,2,9,0],[26,8,9,6,"LAST_SYNC_KEY"],[26,21,9,19],[26,24,9,22],[26,42,9,40],[27,2,10,0],[27,8,10,6,"AUTO_SYNC_ENABLED_KEY"],[27,29,10,27],[27,32,10,30],[27,51,10,49],[28,2,11,0],[28,8,11,6,"SYNC_INTERVAL_DAYS"],[28,26,11,24],[28,29,11,27],[28,30,11,28],[28,31,11,29],[28,32,11,30],[30,2,20,0],[31,0,21,0],[32,0,22,0],[33,2,23,7],[33,17,23,22,"isAutoSyncEnabled"],[33,34,23,39,"isAutoSyncEnabled"],[33,35,23,39],[33,37,23,60],[34,4,24,2],[34,8,24,6],[35,6,25,4],[35,12,25,10,"enabled"],[35,19,25,17],[35,22,25,20],[35,28,25,26,"AsyncStorage"],[35,40,25,38],[35,41,25,38,"default"],[35,48,25,38],[35,49,25,39,"getItem"],[35,56,25,46],[35,57,25,47,"AUTO_SYNC_ENABLED_KEY"],[35,78,25,68],[35,79,25,69],[36,6,26,4],[36,13,26,11,"enabled"],[36,20,26,18],[36,25,26,23],[36,31,26,29],[37,4,27,2],[37,5,27,3],[37,6,27,4],[37,13,27,11,"error"],[37,18,27,16],[37,20,27,18],[38,6,28,4,"console"],[38,13,28,11],[38,14,28,12,"error"],[38,19,28,17],[38,20,28,18],[38,54,28,52],[38,56,28,54,"error"],[38,61,28,59],[38,62,28,60],[39,6,29,4],[39,13,29,11],[39,17,29,15],[39,18,29,16],[39,19,29,17],[40,4,30,2],[41,2,31,0],[43,2,33,0],[44,0,34,0],[45,0,35,0],[46,2,36,7],[46,17,36,22,"setAutoSyncEnabled"],[46,35,36,40,"setAutoSyncEnabled"],[46,36,36,41,"enabled"],[46,43,36,57],[46,45,36,74],[47,4,37,2],[47,8,37,6],[48,6,38,4],[48,12,38,10,"AsyncStorage"],[48,24,38,22],[48,25,38,22,"default"],[48,32,38,22],[48,33,38,23,"setItem"],[48,40,38,30],[48,41,38,31,"AUTO_SYNC_ENABLED_KEY"],[48,62,38,52],[48,64,38,54,"enabled"],[48,71,38,61],[48,74,38,64],[48,80,38,70],[48,83,38,73],[48,90,38,80],[48,91,38,81],[49,6,39,4,"console"],[49,13,39,11],[49,14,39,12,"log"],[49,17,39,15],[49,18,39,16],[49,31,39,29,"enabled"],[49,38,39,36],[49,41,39,39],[49,50,39,48],[49,53,39,51],[49,63,39,61],[49,65,39,63],[49,66,39,64],[50,4,40,2],[50,5,40,3],[50,6,40,4],[50,13,40,11,"error"],[50,18,40,16],[50,20,40,18],[51,6,41,4,"console"],[51,13,41,11],[51,14,41,12,"error"],[51,19,41,17],[51,20,41,18],[51,53,41,51],[51,55,41,53,"error"],[51,60,41,58],[51,61,41,59],[52,4,42,2],[53,2,43,0],[55,2,45,0],[56,0,46,0],[57,0,47,0],[58,2,48,7],[58,17,48,22,"getLastSyncTime"],[58,32,48,37,"getLastSyncTime"],[58,33,48,37],[58,35,48,62],[59,4,49,2],[59,8,49,6],[60,6,50,4],[60,12,50,10,"timestamp"],[60,21,50,19],[60,24,50,22],[60,30,50,28,"AsyncStorage"],[60,42,50,40],[60,43,50,40,"default"],[60,50,50,40],[60,51,50,41,"getItem"],[60,58,50,48],[60,59,50,49,"LAST_SYNC_KEY"],[60,72,50,62],[60,73,50,63],[61,6,51,4],[61,13,51,11,"timestamp"],[61,22,51,20],[61,25,51,23],[61,29,51,27,"Date"],[61,33,51,31],[61,34,51,32,"timestamp"],[61,43,51,41],[61,44,51,42],[61,47,51,45],[61,51,51,49],[62,4,52,2],[62,5,52,3],[62,6,52,4],[62,13,52,11,"error"],[62,18,52,16],[62,20,52,18],[63,6,53,4,"console"],[63,13,53,11],[63,14,53,12,"error"],[63,19,53,17],[63,20,53,18],[63,51,53,49],[63,53,53,51,"error"],[63,58,53,56],[63,59,53,57],[64,6,54,4],[64,13,54,11],[64,17,54,15],[65,4,55,2],[66,2,56,0],[68,2,58,0],[69,0,59,0],[70,0,60,0],[71,2,61,7],[71,17,61,22,"isSyncNeeded"],[71,29,61,34,"isSyncNeeded"],[71,30,61,34],[71,32,61,55],[72,4,62,2],[72,10,62,8,"lastSync"],[72,18,62,16],[72,21,62,19],[72,27,62,25,"getLastSyncTime"],[72,42,62,40],[72,43,62,41],[72,44,62,42],[73,4,64,2],[73,8,64,6],[73,9,64,7,"lastSync"],[73,17,64,15],[73,19,64,17],[74,6,65,4,"console"],[74,13,65,11],[74,14,65,12,"log"],[74,17,65,15],[74,18,65,16],[74,57,65,55],[74,58,65,56],[75,6,66,4],[75,13,66,11],[75,17,66,15],[76,4,67,2],[77,4,69,2],[77,10,69,8,"daysSinceSync"],[77,23,69,21],[77,26,69,24],[77,27,69,25,"Date"],[77,31,69,29],[77,32,69,30,"now"],[77,35,69,33],[77,36,69,34],[77,37,69,35],[77,40,69,38,"lastSync"],[77,48,69,46],[77,49,69,47,"getTime"],[77,56,69,54],[77,57,69,55],[77,58,69,56],[77,63,69,61],[77,67,69,65],[77,70,69,68],[77,72,69,70],[77,75,69,73],[77,77,69,75],[77,80,69,78],[77,82,69,80],[77,83,69,81],[78,4,70,2],[78,10,70,8,"needed"],[78,16,70,14],[78,19,70,17,"daysSinceSync"],[78,32,70,30],[78,36,70,34,"SYNC_INTERVAL_DAYS"],[78,54,70,52],[79,4,72,2,"console"],[79,11,72,9],[79,12,72,10,"log"],[79,15,72,13],[79,16,72,14],[79,32,72,30,"daysSinceSync"],[79,45,72,43],[79,46,72,44,"toFixed"],[79,53,72,51],[79,54,72,52],[79,55,72,53],[79,56,72,54],[79,75,72,73,"needed"],[79,81,72,79],[79,84,72,82],[79,92,72,90],[79,95,72,93],[79,107,72,105],[79,109,72,107],[79,110,72,108],[80,4,73,2],[80,11,73,9,"needed"],[80,17,73,15],[81,2,74,0],[83,2,76,0],[84,0,77,0],[85,0,78,0],[86,2,79,0],[86,17,79,15,"getUserShiftsBeforeSync"],[86,40,79,38,"getUserShiftsBeforeSync"],[86,41,79,39,"userName"],[86,49,79,55],[86,51,79,76],[87,4,80,2],[87,8,80,6],[88,6,81,4],[88,12,81,10,"db"],[88,28,81,12],[88,29,81,12,"db"],[88,31,81,12],[88,32,81,13,"initialize"],[88,42,81,23],[88,43,81,24],[88,44,81,25],[89,6,83,4],[89,12,83,10,"now"],[89,15,83,13],[89,18,83,16],[89,22,83,20,"Date"],[89,26,83,24],[89,27,83,25],[89,28,83,26],[90,6,84,4],[90,12,84,10,"futureDate"],[90,22,84,20],[90,25,84,23],[90,29,84,27,"Date"],[90,33,84,31],[90,34,84,32,"now"],[90,37,84,35],[90,38,84,36,"getFullYear"],[90,49,84,47],[90,50,84,48],[90,51,84,49],[90,54,84,52],[90,55,84,53],[90,57,84,55],[90,59,84,57],[90,61,84,59],[90,63,84,61],[90,64,84,62],[90,65,84,63],[90,66,84,64],[92,6,86,4],[92,12,86,10,"shifts"],[92,18,86,16],[92,21,86,19],[92,27,86,25,"db"],[92,43,86,27],[92,44,86,27,"db"],[92,46,86,27],[92,47,86,28,"getOnCallSchedule"],[92,64,86,45],[92,65,87,6,"now"],[92,68,87,9],[92,69,87,10,"toISOString"],[92,80,87,21],[92,81,87,22],[92,82,87,23],[92,83,87,24,"split"],[92,88,87,29],[92,89,87,30],[92,92,87,33],[92,93,87,34],[92,94,87,35],[92,95,87,36],[92,96,87,37],[92,98,88,6,"futureDate"],[92,108,88,16],[92,109,88,17,"toISOString"],[92,120,88,28],[92,121,88,29],[92,122,88,30],[92,123,88,31,"split"],[92,128,88,36],[92,129,88,37],[92,132,88,40],[92,133,88,41],[92,134,88,42],[92,135,88,43],[92,136,89,4],[92,137,89,5],[93,6,91,4],[93,12,91,10,"userShifts"],[93,22,91,20],[93,25,91,23,"shifts"],[93,31,91,29],[93,32,92,7,"filter"],[93,38,92,13],[93,39,92,15,"s"],[93,40,92,21],[93,44,92,26,"s"],[93,45,92,27],[93,46,92,28,"user_name"],[93,55,92,37],[93,60,92,42,"userName"],[93,68,92,50],[93,69,92,51],[93,70,93,7,"map"],[93,73,93,10],[93,74,93,12,"s"],[93,75,93,18],[93,79,93,23],[93,82,93,26,"s"],[93,83,93,27],[93,84,93,28,"start_date"],[93,94,93,38],[93,98,93,42,"s"],[93,99,93,43],[93,100,93,44,"end_date"],[93,108,93,52],[93,110,93,54],[93,111,93,55],[94,6,95,4],[94,13,95,11,"userShifts"],[94,23,95,21],[95,4,96,2],[95,5,96,3],[95,6,96,4],[95,13,96,11,"error"],[95,18,96,16],[95,20,96,18],[96,6,97,4,"console"],[96,13,97,11],[96,14,97,12,"error"],[96,19,97,17],[96,20,97,18],[96,48,97,46],[96,50,97,48,"error"],[96,55,97,53],[96,56,97,54],[97,6,98,4],[97,13,98,11],[97,15,98,13],[98,4,99,2],[99,2,100,0],[101,2,102,0],[102,0,103,0],[103,0,104,0],[104,2,105,0],[104,11,105,9,"shiftsChanged"],[104,24,105,22,"shiftsChanged"],[104,25,105,23,"before"],[104,31,105,39],[104,33,105,41,"after"],[104,38,105,56],[104,40,105,67],[105,4,106,2],[105,8,106,6,"before"],[105,14,106,12],[105,15,106,13,"length"],[105,21,106,19],[105,26,106,24,"after"],[105,31,106,29],[105,32,106,30,"length"],[105,38,106,36],[105,40,106,38],[105,47,106,45],[105,51,106,49],[106,4,108,2],[106,10,108,8,"beforeSet"],[106,19,108,17],[106,22,108,20],[106,26,108,24,"Set"],[106,29,108,27],[106,30,108,28,"before"],[106,36,108,34],[106,37,108,35],[107,4,109,2],[107,10,109,8,"afterSet"],[107,18,109,16],[107,21,109,19],[107,25,109,23,"Set"],[107,28,109,26],[107,29,109,27,"after"],[107,34,109,32],[107,35,109,33],[109,4,111,2],[110,4,112,2],[110,9,112,7],[110,15,112,13,"shift"],[110,20,112,18],[110,24,112,22,"before"],[110,30,112,28],[110,32,112,30],[111,6,113,4],[111,10,113,8],[111,11,113,9,"afterSet"],[111,19,113,17],[111,20,113,18,"has"],[111,23,113,21],[111,24,113,22,"shift"],[111,29,113,27],[111,30,113,28],[111,32,113,30],[111,39,113,37],[111,43,113,41],[112,4,114,2],[113,4,116,2],[113,9,116,7],[113,15,116,13,"shift"],[113,20,116,18],[113,24,116,22,"after"],[113,29,116,27],[113,31,116,29],[114,6,117,4],[114,10,117,8],[114,11,117,9,"beforeSet"],[114,20,117,18],[114,21,117,19,"has"],[114,24,117,22],[114,25,117,23,"shift"],[114,30,117,28],[114,31,117,29],[114,33,117,31],[114,40,117,38],[114,44,117,42],[115,4,118,2],[116,4,120,2],[116,11,120,9],[116,16,120,14],[117,2,121,0],[119,2,123,0],[120,0,124,0],[121,0,125,0],[122,2,126,0],[122,17,126,15,"performSync"],[122,28,126,26,"performSync"],[122,29,126,26],[122,31,126,50],[123,4,127,2],[123,8,127,6],[124,6,128,4,"console"],[124,13,128,11],[124,14,128,12,"log"],[124,17,128,15],[124,18,128,16],[124,44,128,42],[124,45,128,43],[125,6,130,4],[125,12,130,10,"db"],[125,28,130,12],[125,29,130,12,"db"],[125,31,130,12],[125,32,130,13,"initialize"],[125,42,130,23],[125,43,130,24],[125,44,130,25],[127,6,132,4],[128,6,133,4],[128,12,133,10,"currentUser"],[128,23,133,21],[128,26,133,24],[128,32,133,30,"db"],[128,48,133,32],[128,49,133,32,"db"],[128,51,133,32],[128,52,133,33,"getCurrentUser"],[128,66,133,47],[128,67,133,48],[128,68,133,49],[129,6,134,4],[129,10,134,8],[129,11,134,9,"currentUser"],[129,22,134,20],[129,24,134,22],[130,8,135,6,"console"],[130,15,135,13],[130,16,135,14,"log"],[130,19,135,17],[130,20,135,18],[130,61,135,59],[130,62,135,60],[131,8,136,6],[131,15,136,13],[132,10,136,15,"success"],[132,17,136,22],[132,19,136,24],[132,24,136,29],[133,10,136,31,"newEntriesCount"],[133,25,136,46],[133,27,136,48],[133,28,136,49],[134,10,136,51,"userShiftsChanged"],[134,27,136,68],[134,29,136,70],[134,34,136,75],[135,10,136,77,"error"],[135,15,136,82],[135,17,136,84],[136,8,136,105],[136,9,136,106],[137,6,137,4],[139,6,139,4],[140,6,140,4],[140,12,140,10,"syncUrl"],[140,19,140,17],[140,22,140,20],[140,28,140,26,"AsyncStorage"],[140,40,140,38],[140,41,140,38,"default"],[140,48,140,38],[140,49,140,39,"getItem"],[140,56,140,46],[140,57,140,47],[140,78,140,68],[140,79,140,69],[141,6,141,4],[141,10,141,8],[141,11,141,9,"syncUrl"],[141,18,141,16],[141,20,141,18],[142,8,142,6,"console"],[142,15,142,13],[142,16,142,14,"log"],[142,19,142,17],[142,20,142,18],[142,62,142,60],[142,63,142,61],[143,8,143,6],[143,15,143,13],[144,10,143,15,"success"],[144,17,143,22],[144,19,143,24],[144,24,143,29],[145,10,143,31,"newEntriesCount"],[145,25,143,46],[145,27,143,48],[145,28,143,49],[146,10,143,51,"userShiftsChanged"],[146,27,143,68],[146,29,143,70],[146,34,143,75],[147,10,143,77,"error"],[147,15,143,82],[147,17,143,84],[148,8,143,98],[148,9,143,99],[149,6,144,4],[151,6,146,4],[152,6,147,4],[152,12,147,10,"shiftsBefore"],[152,24,147,22],[152,27,147,25],[152,33,147,31,"getUserShiftsBeforeSync"],[152,56,147,54],[152,57,147,55,"currentUser"],[152,68,147,66],[152,69,147,67,"user_name"],[152,78,147,76],[152,79,147,77],[153,6,148,4,"console"],[153,13,148,11],[153,14,148,12,"log"],[153,17,148,15],[153,18,148,16],[153,33,148,31,"shiftsBefore"],[153,45,148,43],[153,46,148,44,"length"],[153,52,148,50],[153,73,148,71],[153,74,148,72],[155,6,150,4],[156,6,151,4,"console"],[156,13,151,11],[156,14,151,12,"log"],[156,17,151,15],[156,18,151,16],[156,52,151,50],[156,53,151,51],[157,6,152,4],[157,12,152,10,"response"],[157,20,152,18],[157,23,152,21],[157,29,152,27,"fetch"],[157,34,152,32],[157,35,152,33,"syncUrl"],[157,42,152,40],[157,43,152,41],[158,6,154,4],[158,10,154,8],[158,11,154,9,"response"],[158,19,154,17],[158,20,154,18,"ok"],[158,22,154,20],[158,24,154,22],[159,8,155,6],[159,14,155,12],[159,18,155,16,"Error"],[159,23,155,21],[159,24,155,22],[159,32,155,30,"response"],[159,40,155,38],[159,41,155,39,"status"],[159,47,155,45],[159,52,155,50,"response"],[159,60,155,58],[159,61,155,59,"statusText"],[159,71,155,69],[159,73,155,71],[159,74,155,72],[160,6,156,4],[161,6,158,4],[161,12,158,10,"csvText"],[161,19,158,17],[161,22,158,20],[161,28,158,26,"response"],[161,36,158,34],[161,37,158,35,"text"],[161,41,158,39],[161,42,158,40],[161,43,158,41],[162,6,159,4,"console"],[162,13,159,11],[162,14,159,12,"log"],[162,17,159,15],[162,18,159,16],[162,46,159,44],[162,47,159,45],[164,6,161,4],[165,6,162,4],[165,12,162,10,"lines"],[165,17,162,15],[165,20,162,18,"csvText"],[165,27,162,25],[165,28,162,26,"trim"],[165,32,162,30],[165,33,162,31],[165,34,162,32],[165,35,162,33,"split"],[165,40,162,38],[165,41,162,39],[165,45,162,43],[165,46,162,44],[166,6,163,4],[166,12,163,10,"headers"],[166,19,163,17],[166,22,163,20,"lines"],[166,27,163,25],[166,28,163,26],[166,29,163,27],[166,30,163,28],[166,31,163,29,"split"],[166,36,163,34],[166,37,163,35],[166,40,163,38],[166,41,163,39],[166,42,163,40,"map"],[166,45,163,43],[166,46,163,44,"h"],[166,47,163,45],[166,51,163,49,"h"],[166,52,163,50],[166,53,163,51,"trim"],[166,57,163,55],[166,58,163,56],[166,59,163,57],[166,60,163,58],[167,6,165,4],[167,12,165,10,"scheduleData"],[167,24,165,29],[167,27,165,32],[167,29,165,34],[168,6,167,4],[168,11,167,9],[168,15,167,13,"i"],[168,16,167,14],[168,19,167,17],[168,20,167,18],[168,22,167,20,"i"],[168,23,167,21],[168,26,167,24,"lines"],[168,31,167,29],[168,32,167,30,"length"],[168,38,167,36],[168,40,167,38,"i"],[168,41,167,39],[168,43,167,41],[168,45,167,43],[169,8,168,6],[169,14,168,12,"values"],[169,20,168,18],[169,23,168,21,"lines"],[169,28,168,26],[169,29,168,27,"i"],[169,30,168,28],[169,31,168,29],[169,32,168,30,"split"],[169,37,168,35],[169,38,168,36],[169,41,168,39],[169,42,168,40],[169,43,168,41,"map"],[169,46,168,44],[169,47,168,45,"v"],[169,48,168,46],[169,52,168,50,"v"],[169,53,168,51],[169,54,168,52,"trim"],[169,58,168,56],[169,59,168,57],[169,60,168,58],[169,61,168,59],[170,8,169,6],[170,14,169,12,"row"],[170,17,169,20],[170,20,169,23],[170,21,169,24],[170,22,169,25],[171,8,171,6,"headers"],[171,15,171,13],[171,16,171,14,"forEach"],[171,23,171,21],[171,24,171,22],[171,25,171,23,"header"],[171,31,171,29],[171,33,171,31,"index"],[171,38,171,36],[171,43,171,41],[172,10,172,8,"row"],[172,13,172,11],[172,14,172,12,"header"],[172,20,172,18],[172,21,172,19],[172,24,172,22,"values"],[172,30,172,28],[172,31,172,29,"index"],[172,36,172,34],[172,37,172,35],[172,41,172,39],[172,43,172,41],[173,8,173,6],[173,9,173,7],[173,10,173,8],[174,8,175,6],[174,12,175,10,"row"],[174,15,175,13],[174,16,175,14,"start_date"],[174,26,175,24],[174,30,175,28,"row"],[174,33,175,31],[174,34,175,32,"end_date"],[174,42,175,40],[174,46,175,44,"row"],[174,49,175,47],[174,50,175,48,"user"],[174,54,175,52],[174,56,175,54],[175,10,176,8,"scheduleData"],[175,22,176,20],[175,23,176,21,"push"],[175,27,176,25],[175,28,176,26],[176,12,177,10,"start_date"],[176,22,177,20],[176,24,177,22,"row"],[176,27,177,25],[176,28,177,26,"start_date"],[176,38,177,36],[177,12,178,10,"end_date"],[177,20,178,18],[177,22,178,20,"row"],[177,25,178,23],[177,26,178,24,"end_date"],[177,34,178,32],[178,12,179,10,"user"],[178,16,179,14],[178,18,179,16,"row"],[178,21,179,19],[178,22,179,20,"user"],[178,26,179,24],[179,12,180,10,"notes"],[179,17,180,15],[179,19,180,17,"row"],[179,22,180,20],[179,23,180,21,"notes"],[179,28,180,26],[179,32,180,30],[180,10,181,8],[180,11,181,9],[180,12,181,10],[181,8,182,6],[182,6,183,4],[183,6,185,4,"console"],[183,13,185,11],[183,14,185,12,"log"],[183,17,185,15],[183,18,185,16],[183,31,185,29,"scheduleData"],[183,43,185,41],[183,44,185,42,"length"],[183,50,185,48],[183,69,185,67],[183,70,185,68],[185,6,187,4],[186,6,188,4,"console"],[186,13,188,11],[186,14,188,12,"log"],[186,17,188,15],[186,18,188,16],[186,53,188,51],[186,54,188,52],[187,6,189,4],[187,12,189,10,"db"],[187,28,189,12],[187,29,189,12,"db"],[187,31,189,12],[187,32,189,13,"clearOnCallSchedule"],[187,51,189,32],[187,52,189,33],[187,53,189,34],[188,6,191,4],[188,12,191,10,"db"],[188,28,191,12],[188,29,191,12,"db"],[188,31,191,12],[188,32,191,13,"importOnCallSchedule"],[188,52,191,33],[188,53,191,34,"scheduleData"],[188,65,191,46],[188,66,191,47],[190,6,193,4],[191,6,194,4],[191,12,194,10,"uniqueUsers"],[191,23,194,21],[191,26,194,24],[191,27,194,25],[191,30,194,28],[191,34,194,32,"Set"],[191,37,194,35],[191,38,194,36,"scheduleData"],[191,50,194,48],[191,51,194,49,"map"],[191,54,194,52],[191,55,194,53,"s"],[191,56,194,54],[191,60,194,58,"s"],[191,61,194,59],[191,62,194,60,"user"],[191,66,194,64],[191,67,194,65],[191,68,194,66],[191,69,194,67],[192,6,195,4],[192,11,195,9],[192,17,195,15,"user"],[192,21,195,19],[192,25,195,23,"uniqueUsers"],[192,36,195,34],[192,38,195,36],[193,8,196,6],[193,14,196,12,"db"],[193,30,196,14],[193,31,196,14,"db"],[193,33,196,14],[193,34,196,15,"addOnCallUser"],[193,47,196,28],[193,48,196,29,"user"],[193,52,196,33],[193,54,196,35],[193,59,196,40],[193,60,196,41],[194,6,197,4],[195,6,199,4,"console"],[195,13,199,11],[195,14,199,12,"log"],[195,17,199,15],[195,18,199,16],[195,52,199,50],[195,53,199,51],[197,6,201,4],[198,6,202,4],[198,12,202,10,"shiftsAfter"],[198,23,202,21],[198,26,202,24],[198,32,202,30,"getUserShiftsBeforeSync"],[198,55,202,53],[198,56,202,54,"currentUser"],[198,67,202,65],[198,68,202,66,"user_name"],[198,77,202,75],[198,78,202,76],[199,6,203,4,"console"],[199,13,203,11],[199,14,203,12,"log"],[199,17,203,15],[199,18,203,16],[199,33,203,31,"shiftsAfter"],[199,44,203,42],[199,45,203,43,"length"],[199,51,203,49],[199,71,203,69],[199,72,203,70],[200,6,205,4],[200,12,205,10,"userShiftsChanged"],[200,29,205,27],[200,32,205,30,"shiftsChanged"],[200,45,205,43],[200,46,205,44,"shiftsBefore"],[200,58,205,56],[200,60,205,58,"shiftsAfter"],[200,71,205,69],[200,72,205,70],[201,6,207,4],[201,10,207,8,"userShiftsChanged"],[201,27,207,25],[201,29,207,27],[202,8,208,6,"console"],[202,15,208,13],[202,16,208,14,"log"],[202,19,208,17],[202,20,208,18],[202,53,208,51],[202,54,208,52],[203,6,209,4],[203,7,209,5],[203,13,209,11],[204,8,210,6,"console"],[204,15,210,13],[204,16,210,14,"log"],[204,19,210,17],[204,20,210,18],[204,48,210,46],[204,49,210,47],[205,6,211,4],[207,6,213,4],[208,6,214,4],[208,12,214,10,"AsyncStorage"],[208,24,214,22],[208,25,214,22,"default"],[208,32,214,22],[208,33,214,23,"setItem"],[208,40,214,30],[208,41,214,31,"LAST_SYNC_KEY"],[208,54,214,44],[208,56,214,46],[208,60,214,50,"Date"],[208,64,214,54],[208,65,214,55],[208,66,214,56],[208,67,214,57,"toISOString"],[208,78,214,68],[208,79,214,69],[208,80,214,70],[208,81,214,71],[209,6,216,4],[209,13,216,11],[210,8,217,6,"success"],[210,15,217,13],[210,17,217,15],[210,21,217,19],[211,8,218,6,"newEntriesCount"],[211,23,218,21],[211,25,218,23,"scheduleData"],[211,37,218,35],[211,38,218,36,"length"],[211,44,218,42],[212,8,219,6,"userShiftsChanged"],[213,6,220,4],[213,7,220,5],[214,4,222,2],[214,5,222,3],[214,6,222,4],[214,13,222,11,"error"],[214,18,222,21],[214,20,222,23],[215,6,223,4,"console"],[215,13,223,11],[215,14,223,12,"error"],[215,19,223,17],[215,20,223,18],[215,41,223,39],[215,43,223,41,"error"],[215,48,223,46],[215,49,223,47],[216,6,224,4],[216,13,224,11],[217,8,225,6,"success"],[217,15,225,13],[217,17,225,15],[217,22,225,20],[218,8,226,6,"newEntriesCount"],[218,23,226,21],[218,25,226,23],[218,26,226,24],[219,8,227,6,"userShiftsChanged"],[219,25,227,23],[219,27,227,25],[219,32,227,30],[220,8,228,6,"error"],[220,13,228,11],[220,15,228,13,"error"],[220,20,228,18],[220,21,228,19,"message"],[221,6,229,4],[221,7,229,5],[222,4,230,2],[223,2,231,0],[225,2,233,0],[226,0,234,0],[227,0,235,0],[228,0,236,0],[229,2,237,0],[229,17,237,15,"notifyUserShiftsChanged"],[229,40,237,38,"notifyUserShiftsChanged"],[229,41,237,38],[229,43,237,56],[230,4,238,2],[231,4,239,2],[232,4,240,2,"console"],[232,11,240,9],[232,12,240,10,"log"],[232,15,240,13],[232,16,240,14],[232,82,240,80],[232,83,240,81],[233,2,241,0],[235,2,243,0],[236,0,244,0],[237,0,245,0],[238,2,246,7],[238,17,246,22,"checkAndSync"],[238,29,246,34,"checkAndSync"],[238,30,246,34],[238,32,246,65],[239,4,247,2],[239,8,247,6],[240,6,248,4],[241,6,249,4],[241,12,249,10,"enabled"],[241,19,249,17],[241,22,249,20],[241,28,249,26,"isAutoSyncEnabled"],[241,45,249,43],[241,46,249,44],[241,47,249,45],[242,6,250,4],[242,10,250,8],[242,11,250,9,"enabled"],[242,18,250,16],[242,20,250,18],[243,8,251,6,"console"],[243,15,251,13],[243,16,251,14,"log"],[243,19,251,17],[243,20,251,18],[243,46,251,44],[243,47,251,45],[244,8,252,6],[244,15,252,13],[244,19,252,17],[245,6,253,4],[247,6,255,4],[248,6,256,4],[248,12,256,10,"needed"],[248,18,256,16],[248,21,256,19],[248,27,256,25,"isSyncNeeded"],[248,39,256,37],[248,40,256,38],[248,41,256,39],[249,6,257,4],[249,10,257,8],[249,11,257,9,"needed"],[249,17,257,15],[249,19,257,17],[250,8,258,6,"console"],[250,15,258,13],[250,16,258,14,"log"],[250,19,258,17],[250,20,258,18],[250,44,258,42],[250,45,258,43],[251,8,259,6],[251,15,259,13],[251,19,259,17],[252,6,260,4],[254,6,262,4],[255,6,263,4,"console"],[255,13,263,11],[255,14,263,12,"log"],[255,17,263,15],[255,18,263,16],[255,42,263,40],[255,43,263,41],[256,6,264,4],[256,12,264,10,"result"],[256,18,264,16],[256,21,264,19],[256,27,264,25,"performSync"],[256,38,264,36],[256,39,264,37],[256,40,264,38],[258,6,266,4],[259,6,267,4],[259,10,267,8,"result"],[259,16,267,14],[259,17,267,15,"success"],[259,24,267,22],[259,28,267,26,"result"],[259,34,267,32],[259,35,267,33,"userShiftsChanged"],[259,52,267,50],[259,54,267,52],[260,8,268,6],[260,14,268,12,"notifyUserShiftsChanged"],[260,37,268,35],[260,38,268,36],[260,39,268,37],[261,6,269,4],[262,6,271,4],[262,13,271,11,"result"],[262,19,271,17],[263,4,273,2],[263,5,273,3],[263,6,273,4],[263,13,273,11,"error"],[263,18,273,16],[263,20,273,18],[264,6,274,4,"console"],[264,13,274,11],[264,14,274,12,"error"],[264,19,274,17],[264,20,274,18],[264,47,274,45],[264,49,274,47,"error"],[264,54,274,52],[264,55,274,53],[265,6,275,4],[265,13,275,11],[265,17,275,15],[266,4,276,2],[267,2,277,0],[269,2,279,0],[270,0,280,0],[271,0,281,0],[272,0,282,0],[273,2,283,7],[273,17,283,22,"clearSyncBadge"],[273,31,283,36,"clearSyncBadge"],[273,32,283,36],[273,34,283,54],[274,4,284,2],[275,4,285,2,"console"],[275,11,285,9],[275,12,285,10,"log"],[275,15,285,13],[275,16,285,14],[275,55,285,53],[275,56,285,54],[276,2,286,0],[277,0,286,1],[277,3]],"functionMap":{"names":["<global>","isAutoSyncEnabled","setAutoSyncEnabled","getLastSyncTime","isSyncNeeded","getUserShiftsBeforeSync","shifts.filter$argument_0","shifts.filter.map$argument_0","shiftsChanged","performSync","lines._.split.map$argument_0","lines.i.split.map$argument_0","headers.forEach$argument_0","scheduleData.map$argument_0","notifyUserShiftsChanged","checkAndSync","clearSyncBadge"],"mappings":"AAA;OCsB;CDQ;OEK;CFO;OGK;CHQ;OIK;CJa;AKK;cCa,oCD;WEC,2CF;CLO;AQK;CRgB;ASK;4CCqC,aD;6CEK,aF;sBGG;OHE;qDIqB,WJ;CTqC;AcM;CdI;OeK;Cf+B;OgBM;ChBG"},"hasCjsExports":false},"type":"js/module"}]}