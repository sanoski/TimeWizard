{"dependencies":[{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":117},"end":{"line":6,"column":69,"index":186}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"./databaseWrapper","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":187},"end":{"line":7,"column":39,"index":226}}],"key":"MUXmcyigDhda3+oXopwCcUAp8ZU=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":227},"end":{"line":8,"column":52,"index":279}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.isAutoSyncEnabled = isAutoSyncEnabled;\n  exports.setAutoSyncEnabled = setAutoSyncEnabled;\n  exports.getLastSyncTime = getLastSyncTime;\n  exports.isSyncNeeded = isSyncNeeded;\n  exports.checkAndSync = checkAndSync;\n  exports.clearSyncBadge = clearSyncBadge;\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[0], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _databaseWrapper = require(_dependencyMap[1], \"./databaseWrapper\");\n  var _expoNotifications = require(_dependencyMap[2], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  /**\n   * Auto-Sync Service for On-Call Schedule\n   * Automatically syncs schedule from Google Sheets when app opens\n   */\n\n  const LAST_SYNC_KEY = 'last_oncall_sync';\n  const AUTO_SYNC_ENABLED_KEY = 'auto_sync_enabled';\n  const SYNC_INTERVAL_DAYS = 7; // Sync once per week\n\n  /**\n   * Check if auto-sync is enabled\n   */\n  async function isAutoSyncEnabled() {\n    try {\n      const enabled = await AsyncStorage.default.getItem(AUTO_SYNC_ENABLED_KEY);\n      return enabled === 'true';\n    } catch (error) {\n      console.error('Error checking auto-sync status:', error);\n      return true; // Default to enabled\n    }\n  }\n\n  /**\n   * Enable or disable auto-sync\n   */\n  async function setAutoSyncEnabled(enabled) {\n    try {\n      await AsyncStorage.default.setItem(AUTO_SYNC_ENABLED_KEY, enabled ? 'true' : 'false');\n      console.log(`Auto-sync ${enabled ? 'enabled' : 'disabled'}`);\n    } catch (error) {\n      console.error('Error setting auto-sync status:', error);\n    }\n  }\n\n  /**\n   * Get last sync timestamp\n   */\n  async function getLastSyncTime() {\n    try {\n      const timestamp = await AsyncStorage.default.getItem(LAST_SYNC_KEY);\n      return timestamp ? new Date(timestamp) : null;\n    } catch (error) {\n      console.error('Error getting last sync time:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Check if sync is needed (> 7 days since last sync)\n   */\n  async function isSyncNeeded() {\n    const lastSync = await getLastSyncTime();\n    if (!lastSync) {\n      console.log('‚è∞ No previous sync found, sync needed');\n      return true;\n    }\n    const daysSinceSync = (Date.now() - lastSync.getTime()) / (1000 * 60 * 60 * 24);\n    const needed = daysSinceSync >= SYNC_INTERVAL_DAYS;\n    console.log(`‚è∞ Last sync: ${daysSinceSync.toFixed(1)} days ago, sync ${needed ? 'needed' : 'not needed'}`);\n    return needed;\n  }\n\n  /**\n   * Get user's current shifts before sync\n   */\n  async function getUserShiftsBeforeSync(userName) {\n    try {\n      await _databaseWrapper.db.initialize();\n      const now = new Date();\n      const futureDate = new Date(now.getFullYear() + 1, 11, 31); // End of next year\n\n      const shifts = await _databaseWrapper.db.getOnCallSchedule(now.toISOString().split('T')[0], futureDate.toISOString().split('T')[0]);\n      const userShifts = shifts.filter(s => s.user_name === userName).map(s => `${s.start_date}_${s.end_date}`);\n      return userShifts;\n    } catch (error) {\n      console.error('Error getting user shifts:', error);\n      return [];\n    }\n  }\n\n  /**\n   * Compare shifts to detect changes\n   */\n  function shiftsChanged(before, after) {\n    if (before.length !== after.length) return true;\n    const beforeSet = new Set(before);\n    const afterSet = new Set(after);\n\n    // Check if any shift was added or removed\n    for (const shift of before) {\n      if (!afterSet.has(shift)) return true;\n    }\n    for (const shift of after) {\n      if (!beforeSet.has(shift)) return true;\n    }\n    return false;\n  }\n\n  /**\n   * Perform the actual sync\n   */\n  async function performSync() {\n    try {\n      console.log('üîÑ Starting auto-sync...');\n      await _databaseWrapper.db.initialize();\n\n      // Get current user\n      const currentUser = await _databaseWrapper.db.getCurrentUser();\n      if (!currentUser) {\n        console.log('‚ö†Ô∏è No current user found, skipping sync');\n        return {\n          success: false,\n          newEntriesCount: 0,\n          userShiftsChanged: false,\n          error: 'No user configured'\n        };\n      }\n\n      // Get sync URL\n      const syncUrl = await AsyncStorage.default.getItem('oncall_schedule_url');\n      if (!syncUrl) {\n        console.log('‚ö†Ô∏è No sync URL configured, skipping sync');\n        return {\n          success: false,\n          newEntriesCount: 0,\n          userShiftsChanged: false,\n          error: 'No sync URL'\n        };\n      }\n\n      // Get user's shifts before sync\n      const shiftsBefore = await getUserShiftsBeforeSync(currentUser.user_name);\n      console.log(`üìä User has ${shiftsBefore.length} shifts before sync`);\n\n      // Fetch CSV from URL\n      console.log('üì• Fetching schedule from URL...');\n      const response = await fetch(syncUrl);\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      const csvText = await response.text();\n      console.log('‚úÖ CSV fetched successfully');\n\n      // Parse CSV\n      const lines = csvText.trim().split('\\n');\n      const headers = lines[0].split(',').map(h => h.trim());\n      const scheduleData = [];\n      for (let i = 1; i < lines.length; i++) {\n        const values = lines[i].split(',').map(v => v.trim());\n        const row = {};\n        headers.forEach((header, index) => {\n          row[header] = values[index] || '';\n        });\n        if (row.start_date && row.end_date && row.user) {\n          scheduleData.push({\n            start_date: row.start_date,\n            end_date: row.end_date,\n            user: row.user,\n            notes: row.notes || ''\n          });\n        }\n      }\n      console.log(`üìÖ Parsed ${scheduleData.length} schedule entries`);\n\n      // Clear and import\n      console.log('üóëÔ∏è Clearing existing schedule...');\n      await _databaseWrapper.db.clearOnCallSchedule();\n      await _databaseWrapper.db.importOnCallSchedule(scheduleData);\n\n      // Extract and add unique users\n      const uniqueUsers = [...new Set(scheduleData.map(s => s.user))];\n      for (const user of uniqueUsers) {\n        await _databaseWrapper.db.addOnCallUser(user, false);\n      }\n      console.log('‚úÖ Schedule imported successfully');\n\n      // Get user's shifts after sync\n      const shiftsAfter = await getUserShiftsBeforeSync(currentUser.user_name);\n      console.log(`üìä User has ${shiftsAfter.length} shifts after sync`);\n      const userShiftsChanged = shiftsChanged(shiftsBefore, shiftsAfter);\n      if (userShiftsChanged) {\n        console.log('‚ö†Ô∏è User\\'s shifts have changed!');\n      } else {\n        console.log('‚úÖ User\\'s shifts unchanged');\n      }\n\n      // Update last sync time\n      await AsyncStorage.default.setItem(LAST_SYNC_KEY, new Date().toISOString());\n      return {\n        success: true,\n        newEntriesCount: scheduleData.length,\n        userShiftsChanged\n      };\n    } catch (error) {\n      console.error('‚ùå Auto-sync failed:', error);\n      return {\n        success: false,\n        newEntriesCount: 0,\n        userShiftsChanged: false,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Show notification badge if user's shifts changed\n   */\n  async function notifyUserShiftsChanged() {\n    try {\n      // Request permissions\n      const {\n        status\n      } = await Notifications.requestPermissionsAsync();\n      if (status === 'granted') {\n        await Notifications.setBadgeCountAsync(1);\n        console.log('üì¨ Badge notification set for shift change');\n      }\n    } catch (error) {\n      console.error('Error setting notification badge:', error);\n    }\n  }\n\n  /**\n   * Main auto-sync function to call on app open\n   */\n  async function checkAndSync() {\n    try {\n      // Check if auto-sync is enabled\n      const enabled = await isAutoSyncEnabled();\n      if (!enabled) {\n        console.log('‚è∏Ô∏è Auto-sync is disabled');\n        return null;\n      }\n\n      // Check if sync is needed\n      const needed = await isSyncNeeded();\n      if (!needed) {\n        console.log('‚è∏Ô∏è Sync not needed yet');\n        return null;\n      }\n\n      // Perform sync\n      console.log('üîÑ Auto-sync triggered');\n      const result = await performSync();\n\n      // Show badge if user's shifts changed\n      if (result.success && result.userShiftsChanged) {\n        await notifyUserShiftsChanged();\n      }\n      return result;\n    } catch (error) {\n      console.error('‚ùå Auto-sync check failed:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Clear notification badge\n   */\n  async function clearSyncBadge() {\n    try {\n      await Notifications.setBadgeCountAsync(0);\n      console.log('‚úÖ Badge cleared');\n    } catch (error) {\n      console.error('Error clearing badge:', error);\n    }\n  }\n});","lineCount":305,"map":[[27,2,24,0,"exports"],[27,9,24,0],[27,10,24,0,"isAutoSyncEnabled"],[27,27,24,0],[27,30,24,0,"isAutoSyncEnabled"],[27,47,24,0],[28,2,37,0,"exports"],[28,9,37,0],[28,10,37,0,"setAutoSyncEnabled"],[28,28,37,0],[28,31,37,0,"setAutoSyncEnabled"],[28,49,37,0],[29,2,49,0,"exports"],[29,9,49,0],[29,10,49,0,"getLastSyncTime"],[29,25,49,0],[29,28,49,0,"getLastSyncTime"],[29,43,49,0],[30,2,62,0,"exports"],[30,9,62,0],[30,10,62,0,"isSyncNeeded"],[30,22,62,0],[30,25,62,0,"isSyncNeeded"],[30,37,62,0],[31,2,254,0,"exports"],[31,9,254,0],[31,10,254,0,"checkAndSync"],[31,22,254,0],[31,25,254,0,"checkAndSync"],[31,37,254,0],[32,2,290,0,"exports"],[32,9,290,0],[32,10,290,0,"clearSyncBadge"],[32,24,290,0],[32,27,290,0,"clearSyncBadge"],[32,41,290,0],[33,2,6,0],[33,6,6,0,"_reactNativeAsyncStorageAsyncStorage"],[33,42,6,0],[33,45,6,0,"require"],[33,52,6,0],[33,53,6,0,"_dependencyMap"],[33,67,6,0],[34,2,6,0],[34,6,6,0,"AsyncStorage"],[34,18,6,0],[34,21,6,0,"_interopDefault"],[34,36,6,0],[34,37,6,0,"_reactNativeAsyncStorageAsyncStorage"],[34,73,6,0],[35,2,7,0],[35,6,7,0,"_databaseWrapper"],[35,22,7,0],[35,25,7,0,"require"],[35,32,7,0],[35,33,7,0,"_dependencyMap"],[35,47,7,0],[36,2,8,0],[36,6,8,0,"_expoNotifications"],[36,24,8,0],[36,27,8,0,"require"],[36,34,8,0],[36,35,8,0,"_dependencyMap"],[36,49,8,0],[37,2,8,0],[37,6,8,0,"Notifications"],[37,19,8,0],[37,22,8,0,"_interopNamespace"],[37,39,8,0],[37,40,8,0,"_expoNotifications"],[37,58,8,0],[38,2,1,0],[39,0,2,0],[40,0,3,0],[41,0,4,0],[43,2,10,0],[43,8,10,6,"LAST_SYNC_KEY"],[43,21,10,19],[43,24,10,22],[43,42,10,40],[44,2,11,0],[44,8,11,6,"AUTO_SYNC_ENABLED_KEY"],[44,29,11,27],[44,32,11,30],[44,51,11,49],[45,2,12,0],[45,8,12,6,"SYNC_INTERVAL_DAYS"],[45,26,12,24],[45,29,12,27],[45,30,12,28],[45,31,12,29],[45,32,12,30],[47,2,21,0],[48,0,22,0],[49,0,23,0],[50,2,24,7],[50,17,24,22,"isAutoSyncEnabled"],[50,34,24,39,"isAutoSyncEnabled"],[50,35,24,39],[50,37,24,60],[51,4,25,2],[51,8,25,6],[52,6,26,4],[52,12,26,10,"enabled"],[52,19,26,17],[52,22,26,20],[52,28,26,26,"AsyncStorage"],[52,40,26,38],[52,41,26,38,"default"],[52,48,26,38],[52,49,26,39,"getItem"],[52,56,26,46],[52,57,26,47,"AUTO_SYNC_ENABLED_KEY"],[52,78,26,68],[52,79,26,69],[53,6,27,4],[53,13,27,11,"enabled"],[53,20,27,18],[53,25,27,23],[53,31,27,29],[54,4,28,2],[54,5,28,3],[54,6,28,4],[54,13,28,11,"error"],[54,18,28,16],[54,20,28,18],[55,6,29,4,"console"],[55,13,29,11],[55,14,29,12,"error"],[55,19,29,17],[55,20,29,18],[55,54,29,52],[55,56,29,54,"error"],[55,61,29,59],[55,62,29,60],[56,6,30,4],[56,13,30,11],[56,17,30,15],[56,18,30,16],[56,19,30,17],[57,4,31,2],[58,2,32,0],[60,2,34,0],[61,0,35,0],[62,0,36,0],[63,2,37,7],[63,17,37,22,"setAutoSyncEnabled"],[63,35,37,40,"setAutoSyncEnabled"],[63,36,37,41,"enabled"],[63,43,37,57],[63,45,37,74],[64,4,38,2],[64,8,38,6],[65,6,39,4],[65,12,39,10,"AsyncStorage"],[65,24,39,22],[65,25,39,22,"default"],[65,32,39,22],[65,33,39,23,"setItem"],[65,40,39,30],[65,41,39,31,"AUTO_SYNC_ENABLED_KEY"],[65,62,39,52],[65,64,39,54,"enabled"],[65,71,39,61],[65,74,39,64],[65,80,39,70],[65,83,39,73],[65,90,39,80],[65,91,39,81],[66,6,40,4,"console"],[66,13,40,11],[66,14,40,12,"log"],[66,17,40,15],[66,18,40,16],[66,31,40,29,"enabled"],[66,38,40,36],[66,41,40,39],[66,50,40,48],[66,53,40,51],[66,63,40,61],[66,65,40,63],[66,66,40,64],[67,4,41,2],[67,5,41,3],[67,6,41,4],[67,13,41,11,"error"],[67,18,41,16],[67,20,41,18],[68,6,42,4,"console"],[68,13,42,11],[68,14,42,12,"error"],[68,19,42,17],[68,20,42,18],[68,53,42,51],[68,55,42,53,"error"],[68,60,42,58],[68,61,42,59],[69,4,43,2],[70,2,44,0],[72,2,46,0],[73,0,47,0],[74,0,48,0],[75,2,49,7],[75,17,49,22,"getLastSyncTime"],[75,32,49,37,"getLastSyncTime"],[75,33,49,37],[75,35,49,62],[76,4,50,2],[76,8,50,6],[77,6,51,4],[77,12,51,10,"timestamp"],[77,21,51,19],[77,24,51,22],[77,30,51,28,"AsyncStorage"],[77,42,51,40],[77,43,51,40,"default"],[77,50,51,40],[77,51,51,41,"getItem"],[77,58,51,48],[77,59,51,49,"LAST_SYNC_KEY"],[77,72,51,62],[77,73,51,63],[78,6,52,4],[78,13,52,11,"timestamp"],[78,22,52,20],[78,25,52,23],[78,29,52,27,"Date"],[78,33,52,31],[78,34,52,32,"timestamp"],[78,43,52,41],[78,44,52,42],[78,47,52,45],[78,51,52,49],[79,4,53,2],[79,5,53,3],[79,6,53,4],[79,13,53,11,"error"],[79,18,53,16],[79,20,53,18],[80,6,54,4,"console"],[80,13,54,11],[80,14,54,12,"error"],[80,19,54,17],[80,20,54,18],[80,51,54,49],[80,53,54,51,"error"],[80,58,54,56],[80,59,54,57],[81,6,55,4],[81,13,55,11],[81,17,55,15],[82,4,56,2],[83,2,57,0],[85,2,59,0],[86,0,60,0],[87,0,61,0],[88,2,62,7],[88,17,62,22,"isSyncNeeded"],[88,29,62,34,"isSyncNeeded"],[88,30,62,34],[88,32,62,55],[89,4,63,2],[89,10,63,8,"lastSync"],[89,18,63,16],[89,21,63,19],[89,27,63,25,"getLastSyncTime"],[89,42,63,40],[89,43,63,41],[89,44,63,42],[90,4,65,2],[90,8,65,6],[90,9,65,7,"lastSync"],[90,17,65,15],[90,19,65,17],[91,6,66,4,"console"],[91,13,66,11],[91,14,66,12,"log"],[91,17,66,15],[91,18,66,16],[91,57,66,55],[91,58,66,56],[92,6,67,4],[92,13,67,11],[92,17,67,15],[93,4,68,2],[94,4,70,2],[94,10,70,8,"daysSinceSync"],[94,23,70,21],[94,26,70,24],[94,27,70,25,"Date"],[94,31,70,29],[94,32,70,30,"now"],[94,35,70,33],[94,36,70,34],[94,37,70,35],[94,40,70,38,"lastSync"],[94,48,70,46],[94,49,70,47,"getTime"],[94,56,70,54],[94,57,70,55],[94,58,70,56],[94,63,70,61],[94,67,70,65],[94,70,70,68],[94,72,70,70],[94,75,70,73],[94,77,70,75],[94,80,70,78],[94,82,70,80],[94,83,70,81],[95,4,71,2],[95,10,71,8,"needed"],[95,16,71,14],[95,19,71,17,"daysSinceSync"],[95,32,71,30],[95,36,71,34,"SYNC_INTERVAL_DAYS"],[95,54,71,52],[96,4,73,2,"console"],[96,11,73,9],[96,12,73,10,"log"],[96,15,73,13],[96,16,73,14],[96,32,73,30,"daysSinceSync"],[96,45,73,43],[96,46,73,44,"toFixed"],[96,53,73,51],[96,54,73,52],[96,55,73,53],[96,56,73,54],[96,75,73,73,"needed"],[96,81,73,79],[96,84,73,82],[96,92,73,90],[96,95,73,93],[96,107,73,105],[96,109,73,107],[96,110,73,108],[97,4,74,2],[97,11,74,9,"needed"],[97,17,74,15],[98,2,75,0],[100,2,77,0],[101,0,78,0],[102,0,79,0],[103,2,80,0],[103,17,80,15,"getUserShiftsBeforeSync"],[103,40,80,38,"getUserShiftsBeforeSync"],[103,41,80,39,"userName"],[103,49,80,55],[103,51,80,76],[104,4,81,2],[104,8,81,6],[105,6,82,4],[105,12,82,10,"db"],[105,28,82,12],[105,29,82,12,"db"],[105,31,82,12],[105,32,82,13,"initialize"],[105,42,82,23],[105,43,82,24],[105,44,82,25],[106,6,84,4],[106,12,84,10,"now"],[106,15,84,13],[106,18,84,16],[106,22,84,20,"Date"],[106,26,84,24],[106,27,84,25],[106,28,84,26],[107,6,85,4],[107,12,85,10,"futureDate"],[107,22,85,20],[107,25,85,23],[107,29,85,27,"Date"],[107,33,85,31],[107,34,85,32,"now"],[107,37,85,35],[107,38,85,36,"getFullYear"],[107,49,85,47],[107,50,85,48],[107,51,85,49],[107,54,85,52],[107,55,85,53],[107,57,85,55],[107,59,85,57],[107,61,85,59],[107,63,85,61],[107,64,85,62],[107,65,85,63],[107,66,85,64],[109,6,87,4],[109,12,87,10,"shifts"],[109,18,87,16],[109,21,87,19],[109,27,87,25,"db"],[109,43,87,27],[109,44,87,27,"db"],[109,46,87,27],[109,47,87,28,"getOnCallSchedule"],[109,64,87,45],[109,65,88,6,"now"],[109,68,88,9],[109,69,88,10,"toISOString"],[109,80,88,21],[109,81,88,22],[109,82,88,23],[109,83,88,24,"split"],[109,88,88,29],[109,89,88,30],[109,92,88,33],[109,93,88,34],[109,94,88,35],[109,95,88,36],[109,96,88,37],[109,98,89,6,"futureDate"],[109,108,89,16],[109,109,89,17,"toISOString"],[109,120,89,28],[109,121,89,29],[109,122,89,30],[109,123,89,31,"split"],[109,128,89,36],[109,129,89,37],[109,132,89,40],[109,133,89,41],[109,134,89,42],[109,135,89,43],[109,136,90,4],[109,137,90,5],[110,6,92,4],[110,12,92,10,"userShifts"],[110,22,92,20],[110,25,92,23,"shifts"],[110,31,92,29],[110,32,93,7,"filter"],[110,38,93,13],[110,39,93,15,"s"],[110,40,93,21],[110,44,93,26,"s"],[110,45,93,27],[110,46,93,28,"user_name"],[110,55,93,37],[110,60,93,42,"userName"],[110,68,93,50],[110,69,93,51],[110,70,94,7,"map"],[110,73,94,10],[110,74,94,12,"s"],[110,75,94,18],[110,79,94,23],[110,82,94,26,"s"],[110,83,94,27],[110,84,94,28,"start_date"],[110,94,94,38],[110,98,94,42,"s"],[110,99,94,43],[110,100,94,44,"end_date"],[110,108,94,52],[110,110,94,54],[110,111,94,55],[111,6,96,4],[111,13,96,11,"userShifts"],[111,23,96,21],[112,4,97,2],[112,5,97,3],[112,6,97,4],[112,13,97,11,"error"],[112,18,97,16],[112,20,97,18],[113,6,98,4,"console"],[113,13,98,11],[113,14,98,12,"error"],[113,19,98,17],[113,20,98,18],[113,48,98,46],[113,50,98,48,"error"],[113,55,98,53],[113,56,98,54],[114,6,99,4],[114,13,99,11],[114,15,99,13],[115,4,100,2],[116,2,101,0],[118,2,103,0],[119,0,104,0],[120,0,105,0],[121,2,106,0],[121,11,106,9,"shiftsChanged"],[121,24,106,22,"shiftsChanged"],[121,25,106,23,"before"],[121,31,106,39],[121,33,106,41,"after"],[121,38,106,56],[121,40,106,67],[122,4,107,2],[122,8,107,6,"before"],[122,14,107,12],[122,15,107,13,"length"],[122,21,107,19],[122,26,107,24,"after"],[122,31,107,29],[122,32,107,30,"length"],[122,38,107,36],[122,40,107,38],[122,47,107,45],[122,51,107,49],[123,4,109,2],[123,10,109,8,"beforeSet"],[123,19,109,17],[123,22,109,20],[123,26,109,24,"Set"],[123,29,109,27],[123,30,109,28,"before"],[123,36,109,34],[123,37,109,35],[124,4,110,2],[124,10,110,8,"afterSet"],[124,18,110,16],[124,21,110,19],[124,25,110,23,"Set"],[124,28,110,26],[124,29,110,27,"after"],[124,34,110,32],[124,35,110,33],[126,4,112,2],[127,4,113,2],[127,9,113,7],[127,15,113,13,"shift"],[127,20,113,18],[127,24,113,22,"before"],[127,30,113,28],[127,32,113,30],[128,6,114,4],[128,10,114,8],[128,11,114,9,"afterSet"],[128,19,114,17],[128,20,114,18,"has"],[128,23,114,21],[128,24,114,22,"shift"],[128,29,114,27],[128,30,114,28],[128,32,114,30],[128,39,114,37],[128,43,114,41],[129,4,115,2],[130,4,117,2],[130,9,117,7],[130,15,117,13,"shift"],[130,20,117,18],[130,24,117,22,"after"],[130,29,117,27],[130,31,117,29],[131,6,118,4],[131,10,118,8],[131,11,118,9,"beforeSet"],[131,20,118,18],[131,21,118,19,"has"],[131,24,118,22],[131,25,118,23,"shift"],[131,30,118,28],[131,31,118,29],[131,33,118,31],[131,40,118,38],[131,44,118,42],[132,4,119,2],[133,4,121,2],[133,11,121,9],[133,16,121,14],[134,2,122,0],[136,2,124,0],[137,0,125,0],[138,0,126,0],[139,2,127,0],[139,17,127,15,"performSync"],[139,28,127,26,"performSync"],[139,29,127,26],[139,31,127,50],[140,4,128,2],[140,8,128,6],[141,6,129,4,"console"],[141,13,129,11],[141,14,129,12,"log"],[141,17,129,15],[141,18,129,16],[141,44,129,42],[141,45,129,43],[142,6,131,4],[142,12,131,10,"db"],[142,28,131,12],[142,29,131,12,"db"],[142,31,131,12],[142,32,131,13,"initialize"],[142,42,131,23],[142,43,131,24],[142,44,131,25],[144,6,133,4],[145,6,134,4],[145,12,134,10,"currentUser"],[145,23,134,21],[145,26,134,24],[145,32,134,30,"db"],[145,48,134,32],[145,49,134,32,"db"],[145,51,134,32],[145,52,134,33,"getCurrentUser"],[145,66,134,47],[145,67,134,48],[145,68,134,49],[146,6,135,4],[146,10,135,8],[146,11,135,9,"currentUser"],[146,22,135,20],[146,24,135,22],[147,8,136,6,"console"],[147,15,136,13],[147,16,136,14,"log"],[147,19,136,17],[147,20,136,18],[147,61,136,59],[147,62,136,60],[148,8,137,6],[148,15,137,13],[149,10,137,15,"success"],[149,17,137,22],[149,19,137,24],[149,24,137,29],[150,10,137,31,"newEntriesCount"],[150,25,137,46],[150,27,137,48],[150,28,137,49],[151,10,137,51,"userShiftsChanged"],[151,27,137,68],[151,29,137,70],[151,34,137,75],[152,10,137,77,"error"],[152,15,137,82],[152,17,137,84],[153,8,137,105],[153,9,137,106],[154,6,138,4],[156,6,140,4],[157,6,141,4],[157,12,141,10,"syncUrl"],[157,19,141,17],[157,22,141,20],[157,28,141,26,"AsyncStorage"],[157,40,141,38],[157,41,141,38,"default"],[157,48,141,38],[157,49,141,39,"getItem"],[157,56,141,46],[157,57,141,47],[157,78,141,68],[157,79,141,69],[158,6,142,4],[158,10,142,8],[158,11,142,9,"syncUrl"],[158,18,142,16],[158,20,142,18],[159,8,143,6,"console"],[159,15,143,13],[159,16,143,14,"log"],[159,19,143,17],[159,20,143,18],[159,62,143,60],[159,63,143,61],[160,8,144,6],[160,15,144,13],[161,10,144,15,"success"],[161,17,144,22],[161,19,144,24],[161,24,144,29],[162,10,144,31,"newEntriesCount"],[162,25,144,46],[162,27,144,48],[162,28,144,49],[163,10,144,51,"userShiftsChanged"],[163,27,144,68],[163,29,144,70],[163,34,144,75],[164,10,144,77,"error"],[164,15,144,82],[164,17,144,84],[165,8,144,98],[165,9,144,99],[166,6,145,4],[168,6,147,4],[169,6,148,4],[169,12,148,10,"shiftsBefore"],[169,24,148,22],[169,27,148,25],[169,33,148,31,"getUserShiftsBeforeSync"],[169,56,148,54],[169,57,148,55,"currentUser"],[169,68,148,66],[169,69,148,67,"user_name"],[169,78,148,76],[169,79,148,77],[170,6,149,4,"console"],[170,13,149,11],[170,14,149,12,"log"],[170,17,149,15],[170,18,149,16],[170,33,149,31,"shiftsBefore"],[170,45,149,43],[170,46,149,44,"length"],[170,52,149,50],[170,73,149,71],[170,74,149,72],[172,6,151,4],[173,6,152,4,"console"],[173,13,152,11],[173,14,152,12,"log"],[173,17,152,15],[173,18,152,16],[173,52,152,50],[173,53,152,51],[174,6,153,4],[174,12,153,10,"response"],[174,20,153,18],[174,23,153,21],[174,29,153,27,"fetch"],[174,34,153,32],[174,35,153,33,"syncUrl"],[174,42,153,40],[174,43,153,41],[175,6,155,4],[175,10,155,8],[175,11,155,9,"response"],[175,19,155,17],[175,20,155,18,"ok"],[175,22,155,20],[175,24,155,22],[176,8,156,6],[176,14,156,12],[176,18,156,16,"Error"],[176,23,156,21],[176,24,156,22],[176,32,156,30,"response"],[176,40,156,38],[176,41,156,39,"status"],[176,47,156,45],[176,52,156,50,"response"],[176,60,156,58],[176,61,156,59,"statusText"],[176,71,156,69],[176,73,156,71],[176,74,156,72],[177,6,157,4],[178,6,159,4],[178,12,159,10,"csvText"],[178,19,159,17],[178,22,159,20],[178,28,159,26,"response"],[178,36,159,34],[178,37,159,35,"text"],[178,41,159,39],[178,42,159,40],[178,43,159,41],[179,6,160,4,"console"],[179,13,160,11],[179,14,160,12,"log"],[179,17,160,15],[179,18,160,16],[179,46,160,44],[179,47,160,45],[181,6,162,4],[182,6,163,4],[182,12,163,10,"lines"],[182,17,163,15],[182,20,163,18,"csvText"],[182,27,163,25],[182,28,163,26,"trim"],[182,32,163,30],[182,33,163,31],[182,34,163,32],[182,35,163,33,"split"],[182,40,163,38],[182,41,163,39],[182,45,163,43],[182,46,163,44],[183,6,164,4],[183,12,164,10,"headers"],[183,19,164,17],[183,22,164,20,"lines"],[183,27,164,25],[183,28,164,26],[183,29,164,27],[183,30,164,28],[183,31,164,29,"split"],[183,36,164,34],[183,37,164,35],[183,40,164,38],[183,41,164,39],[183,42,164,40,"map"],[183,45,164,43],[183,46,164,44,"h"],[183,47,164,45],[183,51,164,49,"h"],[183,52,164,50],[183,53,164,51,"trim"],[183,57,164,55],[183,58,164,56],[183,59,164,57],[183,60,164,58],[184,6,166,4],[184,12,166,10,"scheduleData"],[184,24,166,29],[184,27,166,32],[184,29,166,34],[185,6,168,4],[185,11,168,9],[185,15,168,13,"i"],[185,16,168,14],[185,19,168,17],[185,20,168,18],[185,22,168,20,"i"],[185,23,168,21],[185,26,168,24,"lines"],[185,31,168,29],[185,32,168,30,"length"],[185,38,168,36],[185,40,168,38,"i"],[185,41,168,39],[185,43,168,41],[185,45,168,43],[186,8,169,6],[186,14,169,12,"values"],[186,20,169,18],[186,23,169,21,"lines"],[186,28,169,26],[186,29,169,27,"i"],[186,30,169,28],[186,31,169,29],[186,32,169,30,"split"],[186,37,169,35],[186,38,169,36],[186,41,169,39],[186,42,169,40],[186,43,169,41,"map"],[186,46,169,44],[186,47,169,45,"v"],[186,48,169,46],[186,52,169,50,"v"],[186,53,169,51],[186,54,169,52,"trim"],[186,58,169,56],[186,59,169,57],[186,60,169,58],[186,61,169,59],[187,8,170,6],[187,14,170,12,"row"],[187,17,170,20],[187,20,170,23],[187,21,170,24],[187,22,170,25],[188,8,172,6,"headers"],[188,15,172,13],[188,16,172,14,"forEach"],[188,23,172,21],[188,24,172,22],[188,25,172,23,"header"],[188,31,172,29],[188,33,172,31,"index"],[188,38,172,36],[188,43,172,41],[189,10,173,8,"row"],[189,13,173,11],[189,14,173,12,"header"],[189,20,173,18],[189,21,173,19],[189,24,173,22,"values"],[189,30,173,28],[189,31,173,29,"index"],[189,36,173,34],[189,37,173,35],[189,41,173,39],[189,43,173,41],[190,8,174,6],[190,9,174,7],[190,10,174,8],[191,8,176,6],[191,12,176,10,"row"],[191,15,176,13],[191,16,176,14,"start_date"],[191,26,176,24],[191,30,176,28,"row"],[191,33,176,31],[191,34,176,32,"end_date"],[191,42,176,40],[191,46,176,44,"row"],[191,49,176,47],[191,50,176,48,"user"],[191,54,176,52],[191,56,176,54],[192,10,177,8,"scheduleData"],[192,22,177,20],[192,23,177,21,"push"],[192,27,177,25],[192,28,177,26],[193,12,178,10,"start_date"],[193,22,178,20],[193,24,178,22,"row"],[193,27,178,25],[193,28,178,26,"start_date"],[193,38,178,36],[194,12,179,10,"end_date"],[194,20,179,18],[194,22,179,20,"row"],[194,25,179,23],[194,26,179,24,"end_date"],[194,34,179,32],[195,12,180,10,"user"],[195,16,180,14],[195,18,180,16,"row"],[195,21,180,19],[195,22,180,20,"user"],[195,26,180,24],[196,12,181,10,"notes"],[196,17,181,15],[196,19,181,17,"row"],[196,22,181,20],[196,23,181,21,"notes"],[196,28,181,26],[196,32,181,30],[197,10,182,8],[197,11,182,9],[197,12,182,10],[198,8,183,6],[199,6,184,4],[200,6,186,4,"console"],[200,13,186,11],[200,14,186,12,"log"],[200,17,186,15],[200,18,186,16],[200,31,186,29,"scheduleData"],[200,43,186,41],[200,44,186,42,"length"],[200,50,186,48],[200,69,186,67],[200,70,186,68],[202,6,188,4],[203,6,189,4,"console"],[203,13,189,11],[203,14,189,12,"log"],[203,17,189,15],[203,18,189,16],[203,53,189,51],[203,54,189,52],[204,6,190,4],[204,12,190,10,"db"],[204,28,190,12],[204,29,190,12,"db"],[204,31,190,12],[204,32,190,13,"clearOnCallSchedule"],[204,51,190,32],[204,52,190,33],[204,53,190,34],[205,6,192,4],[205,12,192,10,"db"],[205,28,192,12],[205,29,192,12,"db"],[205,31,192,12],[205,32,192,13,"importOnCallSchedule"],[205,52,192,33],[205,53,192,34,"scheduleData"],[205,65,192,46],[205,66,192,47],[207,6,194,4],[208,6,195,4],[208,12,195,10,"uniqueUsers"],[208,23,195,21],[208,26,195,24],[208,27,195,25],[208,30,195,28],[208,34,195,32,"Set"],[208,37,195,35],[208,38,195,36,"scheduleData"],[208,50,195,48],[208,51,195,49,"map"],[208,54,195,52],[208,55,195,53,"s"],[208,56,195,54],[208,60,195,58,"s"],[208,61,195,59],[208,62,195,60,"user"],[208,66,195,64],[208,67,195,65],[208,68,195,66],[208,69,195,67],[209,6,196,4],[209,11,196,9],[209,17,196,15,"user"],[209,21,196,19],[209,25,196,23,"uniqueUsers"],[209,36,196,34],[209,38,196,36],[210,8,197,6],[210,14,197,12,"db"],[210,30,197,14],[210,31,197,14,"db"],[210,33,197,14],[210,34,197,15,"addOnCallUser"],[210,47,197,28],[210,48,197,29,"user"],[210,52,197,33],[210,54,197,35],[210,59,197,40],[210,60,197,41],[211,6,198,4],[212,6,200,4,"console"],[212,13,200,11],[212,14,200,12,"log"],[212,17,200,15],[212,18,200,16],[212,52,200,50],[212,53,200,51],[214,6,202,4],[215,6,203,4],[215,12,203,10,"shiftsAfter"],[215,23,203,21],[215,26,203,24],[215,32,203,30,"getUserShiftsBeforeSync"],[215,55,203,53],[215,56,203,54,"currentUser"],[215,67,203,65],[215,68,203,66,"user_name"],[215,77,203,75],[215,78,203,76],[216,6,204,4,"console"],[216,13,204,11],[216,14,204,12,"log"],[216,17,204,15],[216,18,204,16],[216,33,204,31,"shiftsAfter"],[216,44,204,42],[216,45,204,43,"length"],[216,51,204,49],[216,71,204,69],[216,72,204,70],[217,6,206,4],[217,12,206,10,"userShiftsChanged"],[217,29,206,27],[217,32,206,30,"shiftsChanged"],[217,45,206,43],[217,46,206,44,"shiftsBefore"],[217,58,206,56],[217,60,206,58,"shiftsAfter"],[217,71,206,69],[217,72,206,70],[218,6,208,4],[218,10,208,8,"userShiftsChanged"],[218,27,208,25],[218,29,208,27],[219,8,209,6,"console"],[219,15,209,13],[219,16,209,14,"log"],[219,19,209,17],[219,20,209,18],[219,53,209,51],[219,54,209,52],[220,6,210,4],[220,7,210,5],[220,13,210,11],[221,8,211,6,"console"],[221,15,211,13],[221,16,211,14,"log"],[221,19,211,17],[221,20,211,18],[221,48,211,46],[221,49,211,47],[222,6,212,4],[224,6,214,4],[225,6,215,4],[225,12,215,10,"AsyncStorage"],[225,24,215,22],[225,25,215,22,"default"],[225,32,215,22],[225,33,215,23,"setItem"],[225,40,215,30],[225,41,215,31,"LAST_SYNC_KEY"],[225,54,215,44],[225,56,215,46],[225,60,215,50,"Date"],[225,64,215,54],[225,65,215,55],[225,66,215,56],[225,67,215,57,"toISOString"],[225,78,215,68],[225,79,215,69],[225,80,215,70],[225,81,215,71],[226,6,217,4],[226,13,217,11],[227,8,218,6,"success"],[227,15,218,13],[227,17,218,15],[227,21,218,19],[228,8,219,6,"newEntriesCount"],[228,23,219,21],[228,25,219,23,"scheduleData"],[228,37,219,35],[228,38,219,36,"length"],[228,44,219,42],[229,8,220,6,"userShiftsChanged"],[230,6,221,4],[230,7,221,5],[231,4,223,2],[231,5,223,3],[231,6,223,4],[231,13,223,11,"error"],[231,18,223,21],[231,20,223,23],[232,6,224,4,"console"],[232,13,224,11],[232,14,224,12,"error"],[232,19,224,17],[232,20,224,18],[232,41,224,39],[232,43,224,41,"error"],[232,48,224,46],[232,49,224,47],[233,6,225,4],[233,13,225,11],[234,8,226,6,"success"],[234,15,226,13],[234,17,226,15],[234,22,226,20],[235,8,227,6,"newEntriesCount"],[235,23,227,21],[235,25,227,23],[235,26,227,24],[236,8,228,6,"userShiftsChanged"],[236,25,228,23],[236,27,228,25],[236,32,228,30],[237,8,229,6,"error"],[237,13,229,11],[237,15,229,13,"error"],[237,20,229,18],[237,21,229,19,"message"],[238,6,230,4],[238,7,230,5],[239,4,231,2],[240,2,232,0],[242,2,234,0],[243,0,235,0],[244,0,236,0],[245,2,237,0],[245,17,237,15,"notifyUserShiftsChanged"],[245,40,237,38,"notifyUserShiftsChanged"],[245,41,237,38],[245,43,237,56],[246,4,238,2],[246,8,238,6],[247,6,239,4],[248,6,240,4],[248,12,240,10],[249,8,240,12,"status"],[250,6,240,19],[250,7,240,20],[250,10,240,23],[250,16,240,29,"Notifications"],[250,29,240,42],[250,30,240,43,"requestPermissionsAsync"],[250,53,240,66],[250,54,240,67],[250,55,240,68],[251,6,242,4],[251,10,242,8,"status"],[251,16,242,14],[251,21,242,19],[251,30,242,28],[251,32,242,30],[252,8,243,6],[252,14,243,12,"Notifications"],[252,27,243,25],[252,28,243,26,"setBadgeCountAsync"],[252,46,243,44],[252,47,243,45],[252,48,243,46],[252,49,243,47],[253,8,244,6,"console"],[253,15,244,13],[253,16,244,14,"log"],[253,19,244,17],[253,20,244,18],[253,64,244,62],[253,65,244,63],[254,6,245,4],[255,4,246,2],[255,5,246,3],[255,6,246,4],[255,13,246,11,"error"],[255,18,246,16],[255,20,246,18],[256,6,247,4,"console"],[256,13,247,11],[256,14,247,12,"error"],[256,19,247,17],[256,20,247,18],[256,55,247,53],[256,57,247,55,"error"],[256,62,247,60],[256,63,247,61],[257,4,248,2],[258,2,249,0],[260,2,251,0],[261,0,252,0],[262,0,253,0],[263,2,254,7],[263,17,254,22,"checkAndSync"],[263,29,254,34,"checkAndSync"],[263,30,254,34],[263,32,254,65],[264,4,255,2],[264,8,255,6],[265,6,256,4],[266,6,257,4],[266,12,257,10,"enabled"],[266,19,257,17],[266,22,257,20],[266,28,257,26,"isAutoSyncEnabled"],[266,45,257,43],[266,46,257,44],[266,47,257,45],[267,6,258,4],[267,10,258,8],[267,11,258,9,"enabled"],[267,18,258,16],[267,20,258,18],[268,8,259,6,"console"],[268,15,259,13],[268,16,259,14,"log"],[268,19,259,17],[268,20,259,18],[268,46,259,44],[268,47,259,45],[269,8,260,6],[269,15,260,13],[269,19,260,17],[270,6,261,4],[272,6,263,4],[273,6,264,4],[273,12,264,10,"needed"],[273,18,264,16],[273,21,264,19],[273,27,264,25,"isSyncNeeded"],[273,39,264,37],[273,40,264,38],[273,41,264,39],[274,6,265,4],[274,10,265,8],[274,11,265,9,"needed"],[274,17,265,15],[274,19,265,17],[275,8,266,6,"console"],[275,15,266,13],[275,16,266,14,"log"],[275,19,266,17],[275,20,266,18],[275,44,266,42],[275,45,266,43],[276,8,267,6],[276,15,267,13],[276,19,267,17],[277,6,268,4],[279,6,270,4],[280,6,271,4,"console"],[280,13,271,11],[280,14,271,12,"log"],[280,17,271,15],[280,18,271,16],[280,42,271,40],[280,43,271,41],[281,6,272,4],[281,12,272,10,"result"],[281,18,272,16],[281,21,272,19],[281,27,272,25,"performSync"],[281,38,272,36],[281,39,272,37],[281,40,272,38],[283,6,274,4],[284,6,275,4],[284,10,275,8,"result"],[284,16,275,14],[284,17,275,15,"success"],[284,24,275,22],[284,28,275,26,"result"],[284,34,275,32],[284,35,275,33,"userShiftsChanged"],[284,52,275,50],[284,54,275,52],[285,8,276,6],[285,14,276,12,"notifyUserShiftsChanged"],[285,37,276,35],[285,38,276,36],[285,39,276,37],[286,6,277,4],[287,6,279,4],[287,13,279,11,"result"],[287,19,279,17],[288,4,281,2],[288,5,281,3],[288,6,281,4],[288,13,281,11,"error"],[288,18,281,16],[288,20,281,18],[289,6,282,4,"console"],[289,13,282,11],[289,14,282,12,"error"],[289,19,282,17],[289,20,282,18],[289,47,282,45],[289,49,282,47,"error"],[289,54,282,52],[289,55,282,53],[290,6,283,4],[290,13,283,11],[290,17,283,15],[291,4,284,2],[292,2,285,0],[294,2,287,0],[295,0,288,0],[296,0,289,0],[297,2,290,7],[297,17,290,22,"clearSyncBadge"],[297,31,290,36,"clearSyncBadge"],[297,32,290,36],[297,34,290,54],[298,4,291,2],[298,8,291,6],[299,6,292,4],[299,12,292,10,"Notifications"],[299,25,292,23],[299,26,292,24,"setBadgeCountAsync"],[299,44,292,42],[299,45,292,43],[299,46,292,44],[299,47,292,45],[300,6,293,4,"console"],[300,13,293,11],[300,14,293,12,"log"],[300,17,293,15],[300,18,293,16],[300,35,293,33],[300,36,293,34],[301,4,294,2],[301,5,294,3],[301,6,294,4],[301,13,294,11,"error"],[301,18,294,16],[301,20,294,18],[302,6,295,4,"console"],[302,13,295,11],[302,14,295,12,"error"],[302,19,295,17],[302,20,295,18],[302,43,295,41],[302,45,295,43,"error"],[302,50,295,48],[302,51,295,49],[303,4,296,2],[304,2,297,0],[305,0,297,1],[305,3]],"functionMap":{"names":["<global>","isAutoSyncEnabled","setAutoSyncEnabled","getLastSyncTime","isSyncNeeded","getUserShiftsBeforeSync","shifts.filter$argument_0","shifts.filter.map$argument_0","shiftsChanged","performSync","lines._.split.map$argument_0","lines.i.split.map$argument_0","headers.forEach$argument_0","scheduleData.map$argument_0","notifyUserShiftsChanged","checkAndSync","clearSyncBadge"],"mappings":"AAA;OCuB;CDQ;OEK;CFO;OGK;CHQ;OIK;CJa;AKK;cCa,oCD;WEC,2CF;CLO;AQK;CRgB;ASK;4CCqC,aD;6CEK,aF;sBGG;OHE;qDIqB,WJ;CTqC;AcK;CdY;OeK;Cf+B;OgBK;ChBO"},"hasCjsExports":false},"type":"js/module"}]}