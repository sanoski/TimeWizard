{"dependencies":[{"name":"@tamagui/is-equal-shallow","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":67,"index":67}}],"key":"oXmXi1bO8sT1gqP1dk8dy9KP02E=","exportNames":["*"],"imports":1}},{"name":"../hooks/useMedia.mjs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":68},"end":{"line":2,"column":54,"index":122}}],"key":"Npij7OQSEhnZd75f0U7/ZeLaPmE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"subscribeToContextGroup\", {\n    enumerable: true,\n    get: function () {\n      return subscribeToContextGroup;\n    }\n  });\n  var _tamaguiIsEqualShallow = require(_dependencyMap[0], \"@tamagui/is-equal-shallow\");\n  var _hooksUseMediaMjs = require(_dependencyMap[1], \"../hooks/useMedia.mjs\");\n  const subscribeToContextGroup = props => {\n      const {\n        pseudoGroups,\n        mediaGroups,\n        groupContext\n      } = props;\n      if (pseudoGroups || mediaGroups) {\n        process.env.NODE_ENV === \"development\" && !groupContext && console.debug(\"No context group found\");\n        const disposables = /* @__PURE__ */new Set();\n        if (pseudoGroups) for (const name of [...pseudoGroups]) disposables.add(createGroupListener(name, props));\n        if (mediaGroups) for (const name of [...mediaGroups]) disposables.add(createGroupListener(name, props));\n        return () => {\n          disposables.forEach(d => d());\n        };\n      }\n    },\n    createGroupListener = (name, {\n      setStateShallow,\n      pseudoGroups,\n      mediaGroups,\n      groupContext\n    }) => {\n      const parent = groupContext?.[name];\n      if (!parent) return () => {};\n      const dispose = parent.subscribe(({\n        layout,\n        pseudo\n      }) => {\n        setStateShallow(prev => {\n          let didChange = !1;\n          const group = prev.group?.[name] || {\n            pseudo: {},\n            media: {}\n          };\n          if (pseudo && pseudoGroups?.has(name)) group.pseudo ||= {}, (0, _tamaguiIsEqualShallow.mergeIfNotShallowEqual)(group.pseudo, pseudo) !== group.pseudo && (Object.assign(group.pseudo, pseudo), didChange = !0);else if (layout && mediaGroups) {\n            group.media ||= {};\n            const mediaState = (0, _hooksUseMediaMjs.getMediaState)(mediaGroups, layout),\n              next = (0, _tamaguiIsEqualShallow.mergeIfNotShallowEqual)(group.media, mediaState);\n            next !== group.media && (Object.assign(group.media, next), didChange = !0);\n          }\n          return didChange ? {\n            group: {\n              ...prev.group,\n              [name]: group\n            }\n          } : prev;\n        });\n      });\n      return () => {\n        dispose(), setStateShallow({\n          group: {}\n        });\n      };\n    };\n});","lineCount":69,"map":[[7,2,57,0,"Object"],[7,8,57,0],[7,9,57,0,"defineProperty"],[7,23,57,0],[7,24,57,0,"exports"],[7,31,57,0],[8,4,57,0,"enumerable"],[8,14,57,0],[9,4,57,0,"get"],[9,7,57,0],[9,18,57,0,"get"],[9,19,57,0],[10,6,57,0],[10,13,57,9,"subscribeToContextGroup"],[10,36,57,32],[11,4,57,32],[12,2,57,32],[13,2,1,0],[13,6,1,0,"_tamaguiIsEqualShallow"],[13,28,1,0],[13,31,1,0,"require"],[13,38,1,0],[13,39,1,0,"_dependencyMap"],[13,53,1,0],[14,2,2,0],[14,6,2,0,"_hooksUseMediaMjs"],[14,23,2,0],[14,26,2,0,"require"],[14,33,2,0],[14,34,2,0,"_dependencyMap"],[14,48,2,0],[15,2,3,0],[15,8,3,6,"subscribeToContextGroup"],[15,31,3,29],[15,34,3,32,"props"],[15,39,3,37],[15,43,3,41],[16,6,4,4],[16,12,4,10],[17,8,5,6,"pseudoGroups"],[17,20,5,18],[18,8,6,6,"mediaGroups"],[18,19,6,17],[19,8,7,6,"groupContext"],[20,6,8,4],[20,7,8,5],[20,10,8,8,"props"],[20,15,8,13],[21,6,9,4],[21,10,9,8,"pseudoGroups"],[21,22,9,20],[21,26,9,24,"mediaGroups"],[21,37,9,35],[21,39,9,37],[22,8,10,6,"process"],[22,15,10,13],[22,16,10,14,"env"],[22,19,10,17],[22,20,10,18,"NODE_ENV"],[22,28,10,26],[22,33,10,31],[22,46,10,44],[22,50,10,48],[22,51,10,49,"groupContext"],[22,63,10,61],[22,67,10,65,"console"],[22,74,10,72],[22,75,10,73,"debug"],[22,80,10,78],[22,81,10,79],[22,105,10,103],[22,106,10,104],[23,8,11,6],[23,14,11,12,"disposables"],[23,25,11,23],[23,28,11,26],[23,43,11,41],[23,47,11,45,"Set"],[23,50,11,48],[23,51,11,49],[23,52,11,50],[24,8,12,6],[24,12,12,10,"pseudoGroups"],[24,24,12,22],[24,26,12,24],[24,31,12,29],[24,37,12,35,"name"],[24,41,12,39],[24,45,12,43],[24,46,12,44],[24,49,12,47,"pseudoGroups"],[24,61,12,59],[24,62,12,60],[24,64,12,62,"disposables"],[24,75,12,73],[24,76,12,74,"add"],[24,79,12,77],[24,80,12,78,"createGroupListener"],[24,99,12,97],[24,100,12,98,"name"],[24,104,12,102],[24,106,12,104,"props"],[24,111,12,109],[24,112,12,110],[24,113,12,111],[25,8,13,6],[25,12,13,10,"mediaGroups"],[25,23,13,21],[25,25,13,23],[25,30,13,28],[25,36,13,34,"name"],[25,40,13,38],[25,44,13,42],[25,45,13,43],[25,48,13,46,"mediaGroups"],[25,59,13,57],[25,60,13,58],[25,62,13,60,"disposables"],[25,73,13,71],[25,74,13,72,"add"],[25,77,13,75],[25,78,13,76,"createGroupListener"],[25,97,13,95],[25,98,13,96,"name"],[25,102,13,100],[25,104,13,102,"props"],[25,109,13,107],[25,110,13,108],[25,111,13,109],[26,8,14,6],[26,15,14,13],[26,21,14,19],[27,10,15,8,"disposables"],[27,21,15,19],[27,22,15,20,"forEach"],[27,29,15,27],[27,30,15,28,"d"],[27,31,15,29],[27,35,15,33,"d"],[27,36,15,34],[27,37,15,35],[27,38,15,36],[27,39,15,37],[28,8,16,6],[28,9,16,7],[29,6,17,4],[30,4,18,2],[30,5,18,3],[31,4,19,2,"createGroupListener"],[31,23,19,21],[31,26,19,24,"createGroupListener"],[31,27,19,25,"name"],[31,31,19,29],[31,33,19,31],[32,6,20,4,"setStateShallow"],[32,21,20,19],[33,6,21,4,"pseudoGroups"],[33,18,21,16],[34,6,22,4,"mediaGroups"],[34,17,22,15],[35,6,23,4,"groupContext"],[36,4,24,2],[36,5,24,3],[36,10,24,8],[37,6,25,4],[37,12,25,10,"parent"],[37,18,25,16],[37,21,25,19,"groupContext"],[37,33,25,31],[37,36,25,34,"name"],[37,40,25,38],[37,41,25,39],[38,6,26,4],[38,10,26,8],[38,11,26,9,"parent"],[38,17,26,15],[38,19,26,17],[38,26,26,24],[38,32,26,30],[38,33,26,31],[38,34,26,32],[39,6,27,4],[39,12,27,10,"dispose"],[39,19,27,17],[39,22,27,20,"parent"],[39,28,27,26],[39,29,27,27,"subscribe"],[39,38,27,36],[39,39,27,37],[39,40,27,38],[40,8,28,6,"layout"],[40,14,28,12],[41,8,29,6,"pseudo"],[42,6,30,4],[42,7,30,5],[42,12,30,10],[43,8,31,6,"setStateShallow"],[43,23,31,21],[43,24,31,22,"prev"],[43,28,31,26],[43,32,31,30],[44,10,32,8],[44,14,32,12,"didChange"],[44,23,32,21],[44,26,32,24],[44,27,32,25],[44,28,32,26],[45,10,33,8],[45,16,33,14,"group"],[45,21,33,19],[45,24,33,22,"prev"],[45,28,33,26],[45,29,33,27,"group"],[45,34,33,32],[45,37,33,35,"name"],[45,41,33,39],[45,42,33,40],[45,46,33,44],[46,12,34,10,"pseudo"],[46,18,34,16],[46,20,34,18],[46,21,34,19],[46,22,34,20],[47,12,35,10,"media"],[47,17,35,15],[47,19,35,17],[47,20,35,18],[48,10,36,8],[48,11,36,9],[49,10,37,8],[49,14,37,12,"pseudo"],[49,20,37,18],[49,24,37,22,"pseudoGroups"],[49,36,37,34],[49,38,37,36,"has"],[49,41,37,39],[49,42,37,40,"name"],[49,46,37,44],[49,47,37,45],[49,49,37,47,"group"],[49,54,37,52],[49,55,37,53,"pseudo"],[49,61,37,59],[49,66,37,64],[49,67,37,65],[49,68,37,66],[49,70,37,68],[49,74,37,68,"mergeIfNotShallowEqual"],[49,96,37,90],[49,97,37,90,"mergeIfNotShallowEqual"],[49,119,37,90],[49,121,37,91,"group"],[49,126,37,96],[49,127,37,97,"pseudo"],[49,133,37,103],[49,135,37,105,"pseudo"],[49,141,37,111],[49,142,37,112],[49,147,37,117,"group"],[49,152,37,122],[49,153,37,123,"pseudo"],[49,159,37,129],[49,164,37,134,"Object"],[49,170,37,140],[49,171,37,141,"assign"],[49,177,37,147],[49,178,37,148,"group"],[49,183,37,153],[49,184,37,154,"pseudo"],[49,190,37,160],[49,192,37,162,"pseudo"],[49,198,37,168],[49,199,37,169],[49,201,37,171,"didChange"],[49,210,37,180],[49,213,37,183],[49,214,37,184],[49,215,37,185],[49,216,37,186],[49,217,37,187],[49,222,37,192],[49,226,37,196,"layout"],[49,232,37,202],[49,236,37,206,"mediaGroups"],[49,247,37,217],[49,249,37,219],[50,12,38,10,"group"],[50,17,38,15],[50,18,38,16,"media"],[50,23,38,21],[50,28,38,26],[50,29,38,27],[50,30,38,28],[51,12,39,10],[51,18,39,16,"mediaState"],[51,28,39,26],[51,31,39,29],[51,35,39,29,"getMediaState"],[51,52,39,42],[51,53,39,42,"getMediaState"],[51,66,39,42],[51,68,39,43,"mediaGroups"],[51,79,39,54],[51,81,39,56,"layout"],[51,87,39,62],[51,88,39,63],[52,14,40,12,"next"],[52,18,40,16],[52,21,40,19],[52,25,40,19,"mergeIfNotShallowEqual"],[52,47,40,41],[52,48,40,41,"mergeIfNotShallowEqual"],[52,70,40,41],[52,72,40,42,"group"],[52,77,40,47],[52,78,40,48,"media"],[52,83,40,53],[52,85,40,55,"mediaState"],[52,95,40,65],[52,96,40,66],[53,12,41,10,"next"],[53,16,41,14],[53,21,41,19,"group"],[53,26,41,24],[53,27,41,25,"media"],[53,32,41,30],[53,37,41,35,"Object"],[53,43,41,41],[53,44,41,42,"assign"],[53,50,41,48],[53,51,41,49,"group"],[53,56,41,54],[53,57,41,55,"media"],[53,62,41,60],[53,64,41,62,"next"],[53,68,41,66],[53,69,41,67],[53,71,41,69,"didChange"],[53,80,41,78],[53,83,41,81],[53,84,41,82],[53,85,41,83],[53,86,41,84],[54,10,42,8],[55,10,43,8],[55,17,43,15,"didChange"],[55,26,43,24],[55,29,43,27],[56,12,44,10,"group"],[56,17,44,15],[56,19,44,17],[57,14,45,12],[57,17,45,15,"prev"],[57,21,45,19],[57,22,45,20,"group"],[57,27,45,25],[58,14,46,12],[58,15,46,13,"name"],[58,19,46,17],[58,22,46,20,"group"],[59,12,47,10],[60,10,48,8],[60,11,48,9],[60,14,48,12,"prev"],[60,18,48,16],[61,8,49,6],[61,9,49,7],[61,10,49,8],[62,6,50,4],[62,7,50,5],[62,8,50,6],[63,6,51,4],[63,13,51,11],[63,19,51,17],[64,8,52,6,"dispose"],[64,15,52,13],[64,16,52,14],[64,17,52,15],[64,19,52,17,"setStateShallow"],[64,34,52,32],[64,35,52,33],[65,10,53,8,"group"],[65,15,53,13],[65,17,53,15],[65,18,53,16],[66,8,54,6],[66,9,54,7],[66,10,54,8],[67,6,55,4],[67,7,55,5],[68,4,56,2],[68,5,56,3],[69,0,56,4],[69,3]],"functionMap":{"names":["<global>","subscribeToContextGroup","<anonymous>","disposables.forEach$argument_0","createGroupListener","parent.subscribe$argument_0","setStateShallow$argument_0"],"mappings":"AAA;gCCE;aCW;4BCC,QD;ODC;GDE;wBIC;wBFO,QE;qCCC;sBCI;ODkB;KDC;WFC;KEI;GJC"},"hasCjsExports":false},"type":"js/module"}]}