{"dependencies":[{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":117},"end":{"line":6,"column":69,"index":186}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"./databaseWrapper","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":187},"end":{"line":7,"column":39,"index":226}}],"key":"MUXmcyigDhda3+oXopwCcUAp8ZU=","exportNames":["*"],"imports":1}},{"name":"../constants/config","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":227},"end":{"line":8,"column":66,"index":293}}],"key":"TYW5XdhaoOjubMzak8TLCfBrAGc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.isAutoSyncEnabled = isAutoSyncEnabled;\n  exports.setAutoSyncEnabled = setAutoSyncEnabled;\n  exports.getLastSyncTime = getLastSyncTime;\n  exports.isSyncNeeded = isSyncNeeded;\n  exports.checkAndSync = checkAndSync;\n  exports.clearSyncBadge = clearSyncBadge;\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[0], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _databaseWrapper = require(_dependencyMap[1], \"./databaseWrapper\");\n  var _constantsConfig = require(_dependencyMap[2], \"../constants/config\");\n  /**\n   * Auto-Sync Service for On-Call Schedule\n   * Automatically syncs schedule from Google Sheets when app opens\n   */\n\n  const LAST_SYNC_KEY = 'last_oncall_sync';\n  const AUTO_SYNC_ENABLED_KEY = 'auto_sync_enabled';\n  const SYNC_INTERVAL_DAYS = 7; // Sync once per week\n\n  /**\n   * Check if auto-sync is enabled\n   */\n  async function isAutoSyncEnabled() {\n    try {\n      const enabled = await AsyncStorage.default.getItem(AUTO_SYNC_ENABLED_KEY);\n      return enabled === 'true';\n    } catch (error) {\n      console.error('Error checking auto-sync status:', error);\n      return true; // Default to enabled\n    }\n  }\n\n  /**\n   * Enable or disable auto-sync\n   */\n  async function setAutoSyncEnabled(enabled) {\n    try {\n      await AsyncStorage.default.setItem(AUTO_SYNC_ENABLED_KEY, enabled ? 'true' : 'false');\n      console.log(`Auto-sync ${enabled ? 'enabled' : 'disabled'}`);\n    } catch (error) {\n      console.error('Error setting auto-sync status:', error);\n    }\n  }\n\n  /**\n   * Get last sync timestamp\n   */\n  async function getLastSyncTime() {\n    try {\n      const timestamp = await AsyncStorage.default.getItem(LAST_SYNC_KEY);\n      return timestamp ? new Date(timestamp) : null;\n    } catch (error) {\n      console.error('Error getting last sync time:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Check if sync is needed (> 7 days since last sync)\n   */\n  async function isSyncNeeded() {\n    const lastSync = await getLastSyncTime();\n    if (!lastSync) {\n      console.log('‚è∞ No previous sync found, sync needed');\n      return true;\n    }\n    const daysSinceSync = (Date.now() - lastSync.getTime()) / (1000 * 60 * 60 * 24);\n    const needed = daysSinceSync >= SYNC_INTERVAL_DAYS;\n    console.log(`‚è∞ Last sync: ${daysSinceSync.toFixed(1)} days ago, sync ${needed ? 'needed' : 'not needed'}`);\n    return needed;\n  }\n\n  /**\n   * Get user's current shifts before sync\n   */\n  async function getUserShiftsBeforeSync(userName) {\n    try {\n      await _databaseWrapper.db.initialize();\n      const now = new Date();\n      const futureDate = new Date(now.getFullYear() + 1, 11, 31); // End of next year\n\n      const shifts = await _databaseWrapper.db.getOnCallSchedule(now.toISOString().split('T')[0], futureDate.toISOString().split('T')[0]);\n      const userShifts = shifts.filter(s => s.user_name === userName).map(s => `${s.start_date}_${s.end_date}`);\n      return userShifts;\n    } catch (error) {\n      console.error('Error getting user shifts:', error);\n      return [];\n    }\n  }\n\n  /**\n   * Compare shifts to detect changes\n   */\n  function shiftsChanged(before, after) {\n    if (before.length !== after.length) return true;\n    const beforeSet = new Set(before);\n    const afterSet = new Set(after);\n\n    // Check if any shift was added or removed\n    for (const shift of before) {\n      if (!afterSet.has(shift)) return true;\n    }\n    for (const shift of after) {\n      if (!beforeSet.has(shift)) return true;\n    }\n    return false;\n  }\n\n  /**\n   * Perform the actual sync\n   */\n  async function performSync() {\n    try {\n      console.log('üîÑ Starting auto-sync...');\n      await _databaseWrapper.db.initialize();\n\n      // Get current user\n      const currentUser = await _databaseWrapper.db.getCurrentUser();\n      if (!currentUser) {\n        console.log('‚ö†Ô∏è No current user found, skipping sync');\n        return {\n          success: false,\n          newEntriesCount: 0,\n          userShiftsChanged: false,\n          error: 'No user configured'\n        };\n      }\n\n      // Get sync URL (use custom URL if set, otherwise use default)\n      let syncUrl = await AsyncStorage.default.getItem('oncall_schedule_url');\n      if (!syncUrl || syncUrl.trim() === '') {\n        syncUrl = _constantsConfig.DEFAULT_ONCALL_SCHEDULE_URL;\n        console.log('üìå Using default master schedule URL');\n      } else {\n        console.log('üìå Using custom schedule URL from dev menu');\n      }\n\n      // Get user's shifts before sync\n      const shiftsBefore = await getUserShiftsBeforeSync(currentUser.user_name);\n      console.log(`üìä User has ${shiftsBefore.length} shifts before sync`);\n\n      // Fetch CSV from URL\n      console.log('üì• Fetching schedule from URL...');\n      const response = await fetch(syncUrl);\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      const csvText = await response.text();\n      console.log('‚úÖ CSV fetched successfully');\n\n      // Parse CSV\n      const lines = csvText.trim().split('\\n');\n      const headers = lines[0].split(',').map(h => h.trim());\n      const scheduleData = [];\n      for (let i = 1; i < lines.length; i++) {\n        const values = lines[i].split(',').map(v => v.trim());\n        const row = {};\n        headers.forEach((header, index) => {\n          row[header] = values[index] || '';\n        });\n        if (row.start_date && row.end_date && row.user) {\n          scheduleData.push({\n            start_date: row.start_date,\n            end_date: row.end_date,\n            user: row.user,\n            notes: row.notes || ''\n          });\n        }\n      }\n      console.log(`üìÖ Parsed ${scheduleData.length} schedule entries`);\n\n      // Clear and import\n      console.log('üóëÔ∏è Clearing existing schedule...');\n      await _databaseWrapper.db.clearOnCallSchedule();\n      await _databaseWrapper.db.importOnCallSchedule(scheduleData);\n\n      // Extract and add unique users\n      const uniqueUsers = [...new Set(scheduleData.map(s => s.user))];\n      for (const user of uniqueUsers) {\n        await _databaseWrapper.db.addOnCallUser(user, false);\n      }\n      console.log('‚úÖ Schedule imported successfully');\n\n      // Get user's shifts after sync\n      const shiftsAfter = await getUserShiftsBeforeSync(currentUser.user_name);\n      console.log(`üìä User has ${shiftsAfter.length} shifts after sync`);\n      const userShiftsChanged = shiftsChanged(shiftsBefore, shiftsAfter);\n      if (userShiftsChanged) {\n        console.log('‚ö†Ô∏è User\\'s shifts have changed!');\n      } else {\n        console.log('‚úÖ User\\'s shifts unchanged');\n      }\n\n      // Update last sync time\n      await AsyncStorage.default.setItem(LAST_SYNC_KEY, new Date().toISOString());\n      return {\n        success: true,\n        newEntriesCount: scheduleData.length,\n        userShiftsChanged\n      };\n    } catch (error) {\n      console.error('‚ùå Auto-sync failed:', error);\n      return {\n        success: false,\n        newEntriesCount: 0,\n        userShiftsChanged: false,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Show notification badge if user's shifts changed\n   * Note: Badge notifications disabled in Expo Go. Will work in standalone builds.\n   */\n  async function notifyUserShiftsChanged() {\n    // Badge notifications require a standalone build\n    // This is a placeholder for future implementation\n    console.log('üì¨ User shifts changed (badge notifications disabled in Expo Go)');\n  }\n\n  /**\n   * Main auto-sync function to call on app open\n   */\n  async function checkAndSync() {\n    try {\n      // Check if auto-sync is enabled\n      const enabled = await isAutoSyncEnabled();\n      if (!enabled) {\n        console.log('‚è∏Ô∏è Auto-sync is disabled');\n        return null;\n      }\n\n      // Check if sync is needed\n      const needed = await isSyncNeeded();\n      if (!needed) {\n        console.log('‚è∏Ô∏è Sync not needed yet');\n        return null;\n      }\n\n      // Perform sync\n      console.log('üîÑ Auto-sync triggered');\n      const result = await performSync();\n\n      // Show badge if user's shifts changed\n      if (result.success && result.userShiftsChanged) {\n        await notifyUserShiftsChanged();\n      }\n      return result;\n    } catch (error) {\n      console.error('‚ùå Auto-sync check failed:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Clear notification badge\n   * Note: Badge notifications disabled in Expo Go. Will work in standalone builds.\n   */\n  async function clearSyncBadge() {\n    // Badge notifications require a standalone build\n    console.log('‚úÖ Badge cleared (disabled in Expo Go)');\n  }\n});","lineCount":275,"map":[[12,2,24,0,"exports"],[12,9,24,0],[12,10,24,0,"isAutoSyncEnabled"],[12,27,24,0],[12,30,24,0,"isAutoSyncEnabled"],[12,47,24,0],[13,2,37,0,"exports"],[13,9,37,0],[13,10,37,0,"setAutoSyncEnabled"],[13,28,37,0],[13,31,37,0,"setAutoSyncEnabled"],[13,49,37,0],[14,2,49,0,"exports"],[14,9,49,0],[14,10,49,0,"getLastSyncTime"],[14,25,49,0],[14,28,49,0,"getLastSyncTime"],[14,43,49,0],[15,2,62,0,"exports"],[15,9,62,0],[15,10,62,0,"isSyncNeeded"],[15,22,62,0],[15,25,62,0,"isSyncNeeded"],[15,37,62,0],[16,2,249,0,"exports"],[16,9,249,0],[16,10,249,0,"checkAndSync"],[16,22,249,0],[16,25,249,0,"checkAndSync"],[16,37,249,0],[17,2,286,0,"exports"],[17,9,286,0],[17,10,286,0,"clearSyncBadge"],[17,24,286,0],[17,27,286,0,"clearSyncBadge"],[17,41,286,0],[18,2,6,0],[18,6,6,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,6,0],[18,45,6,0,"require"],[18,52,6,0],[18,53,6,0,"_dependencyMap"],[18,67,6,0],[19,2,6,0],[19,6,6,0,"AsyncStorage"],[19,18,6,0],[19,21,6,0,"_interopDefault"],[19,36,6,0],[19,37,6,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,6,0],[20,2,7,0],[20,6,7,0,"_databaseWrapper"],[20,22,7,0],[20,25,7,0,"require"],[20,32,7,0],[20,33,7,0,"_dependencyMap"],[20,47,7,0],[21,2,8,0],[21,6,8,0,"_constantsConfig"],[21,22,8,0],[21,25,8,0,"require"],[21,32,8,0],[21,33,8,0,"_dependencyMap"],[21,47,8,0],[22,2,1,0],[23,0,2,0],[24,0,3,0],[25,0,4,0],[27,2,10,0],[27,8,10,6,"LAST_SYNC_KEY"],[27,21,10,19],[27,24,10,22],[27,42,10,40],[28,2,11,0],[28,8,11,6,"AUTO_SYNC_ENABLED_KEY"],[28,29,11,27],[28,32,11,30],[28,51,11,49],[29,2,12,0],[29,8,12,6,"SYNC_INTERVAL_DAYS"],[29,26,12,24],[29,29,12,27],[29,30,12,28],[29,31,12,29],[29,32,12,30],[31,2,21,0],[32,0,22,0],[33,0,23,0],[34,2,24,7],[34,17,24,22,"isAutoSyncEnabled"],[34,34,24,39,"isAutoSyncEnabled"],[34,35,24,39],[34,37,24,60],[35,4,25,2],[35,8,25,6],[36,6,26,4],[36,12,26,10,"enabled"],[36,19,26,17],[36,22,26,20],[36,28,26,26,"AsyncStorage"],[36,40,26,38],[36,41,26,38,"default"],[36,48,26,38],[36,49,26,39,"getItem"],[36,56,26,46],[36,57,26,47,"AUTO_SYNC_ENABLED_KEY"],[36,78,26,68],[36,79,26,69],[37,6,27,4],[37,13,27,11,"enabled"],[37,20,27,18],[37,25,27,23],[37,31,27,29],[38,4,28,2],[38,5,28,3],[38,6,28,4],[38,13,28,11,"error"],[38,18,28,16],[38,20,28,18],[39,6,29,4,"console"],[39,13,29,11],[39,14,29,12,"error"],[39,19,29,17],[39,20,29,18],[39,54,29,52],[39,56,29,54,"error"],[39,61,29,59],[39,62,29,60],[40,6,30,4],[40,13,30,11],[40,17,30,15],[40,18,30,16],[40,19,30,17],[41,4,31,2],[42,2,32,0],[44,2,34,0],[45,0,35,0],[46,0,36,0],[47,2,37,7],[47,17,37,22,"setAutoSyncEnabled"],[47,35,37,40,"setAutoSyncEnabled"],[47,36,37,41,"enabled"],[47,43,37,57],[47,45,37,74],[48,4,38,2],[48,8,38,6],[49,6,39,4],[49,12,39,10,"AsyncStorage"],[49,24,39,22],[49,25,39,22,"default"],[49,32,39,22],[49,33,39,23,"setItem"],[49,40,39,30],[49,41,39,31,"AUTO_SYNC_ENABLED_KEY"],[49,62,39,52],[49,64,39,54,"enabled"],[49,71,39,61],[49,74,39,64],[49,80,39,70],[49,83,39,73],[49,90,39,80],[49,91,39,81],[50,6,40,4,"console"],[50,13,40,11],[50,14,40,12,"log"],[50,17,40,15],[50,18,40,16],[50,31,40,29,"enabled"],[50,38,40,36],[50,41,40,39],[50,50,40,48],[50,53,40,51],[50,63,40,61],[50,65,40,63],[50,66,40,64],[51,4,41,2],[51,5,41,3],[51,6,41,4],[51,13,41,11,"error"],[51,18,41,16],[51,20,41,18],[52,6,42,4,"console"],[52,13,42,11],[52,14,42,12,"error"],[52,19,42,17],[52,20,42,18],[52,53,42,51],[52,55,42,53,"error"],[52,60,42,58],[52,61,42,59],[53,4,43,2],[54,2,44,0],[56,2,46,0],[57,0,47,0],[58,0,48,0],[59,2,49,7],[59,17,49,22,"getLastSyncTime"],[59,32,49,37,"getLastSyncTime"],[59,33,49,37],[59,35,49,62],[60,4,50,2],[60,8,50,6],[61,6,51,4],[61,12,51,10,"timestamp"],[61,21,51,19],[61,24,51,22],[61,30,51,28,"AsyncStorage"],[61,42,51,40],[61,43,51,40,"default"],[61,50,51,40],[61,51,51,41,"getItem"],[61,58,51,48],[61,59,51,49,"LAST_SYNC_KEY"],[61,72,51,62],[61,73,51,63],[62,6,52,4],[62,13,52,11,"timestamp"],[62,22,52,20],[62,25,52,23],[62,29,52,27,"Date"],[62,33,52,31],[62,34,52,32,"timestamp"],[62,43,52,41],[62,44,52,42],[62,47,52,45],[62,51,52,49],[63,4,53,2],[63,5,53,3],[63,6,53,4],[63,13,53,11,"error"],[63,18,53,16],[63,20,53,18],[64,6,54,4,"console"],[64,13,54,11],[64,14,54,12,"error"],[64,19,54,17],[64,20,54,18],[64,51,54,49],[64,53,54,51,"error"],[64,58,54,56],[64,59,54,57],[65,6,55,4],[65,13,55,11],[65,17,55,15],[66,4,56,2],[67,2,57,0],[69,2,59,0],[70,0,60,0],[71,0,61,0],[72,2,62,7],[72,17,62,22,"isSyncNeeded"],[72,29,62,34,"isSyncNeeded"],[72,30,62,34],[72,32,62,55],[73,4,63,2],[73,10,63,8,"lastSync"],[73,18,63,16],[73,21,63,19],[73,27,63,25,"getLastSyncTime"],[73,42,63,40],[73,43,63,41],[73,44,63,42],[74,4,65,2],[74,8,65,6],[74,9,65,7,"lastSync"],[74,17,65,15],[74,19,65,17],[75,6,66,4,"console"],[75,13,66,11],[75,14,66,12,"log"],[75,17,66,15],[75,18,66,16],[75,57,66,55],[75,58,66,56],[76,6,67,4],[76,13,67,11],[76,17,67,15],[77,4,68,2],[78,4,70,2],[78,10,70,8,"daysSinceSync"],[78,23,70,21],[78,26,70,24],[78,27,70,25,"Date"],[78,31,70,29],[78,32,70,30,"now"],[78,35,70,33],[78,36,70,34],[78,37,70,35],[78,40,70,38,"lastSync"],[78,48,70,46],[78,49,70,47,"getTime"],[78,56,70,54],[78,57,70,55],[78,58,70,56],[78,63,70,61],[78,67,70,65],[78,70,70,68],[78,72,70,70],[78,75,70,73],[78,77,70,75],[78,80,70,78],[78,82,70,80],[78,83,70,81],[79,4,71,2],[79,10,71,8,"needed"],[79,16,71,14],[79,19,71,17,"daysSinceSync"],[79,32,71,30],[79,36,71,34,"SYNC_INTERVAL_DAYS"],[79,54,71,52],[80,4,73,2,"console"],[80,11,73,9],[80,12,73,10,"log"],[80,15,73,13],[80,16,73,14],[80,32,73,30,"daysSinceSync"],[80,45,73,43],[80,46,73,44,"toFixed"],[80,53,73,51],[80,54,73,52],[80,55,73,53],[80,56,73,54],[80,75,73,73,"needed"],[80,81,73,79],[80,84,73,82],[80,92,73,90],[80,95,73,93],[80,107,73,105],[80,109,73,107],[80,110,73,108],[81,4,74,2],[81,11,74,9,"needed"],[81,17,74,15],[82,2,75,0],[84,2,77,0],[85,0,78,0],[86,0,79,0],[87,2,80,0],[87,17,80,15,"getUserShiftsBeforeSync"],[87,40,80,38,"getUserShiftsBeforeSync"],[87,41,80,39,"userName"],[87,49,80,55],[87,51,80,76],[88,4,81,2],[88,8,81,6],[89,6,82,4],[89,12,82,10,"db"],[89,28,82,12],[89,29,82,12,"db"],[89,31,82,12],[89,32,82,13,"initialize"],[89,42,82,23],[89,43,82,24],[89,44,82,25],[90,6,84,4],[90,12,84,10,"now"],[90,15,84,13],[90,18,84,16],[90,22,84,20,"Date"],[90,26,84,24],[90,27,84,25],[90,28,84,26],[91,6,85,4],[91,12,85,10,"futureDate"],[91,22,85,20],[91,25,85,23],[91,29,85,27,"Date"],[91,33,85,31],[91,34,85,32,"now"],[91,37,85,35],[91,38,85,36,"getFullYear"],[91,49,85,47],[91,50,85,48],[91,51,85,49],[91,54,85,52],[91,55,85,53],[91,57,85,55],[91,59,85,57],[91,61,85,59],[91,63,85,61],[91,64,85,62],[91,65,85,63],[91,66,85,64],[93,6,87,4],[93,12,87,10,"shifts"],[93,18,87,16],[93,21,87,19],[93,27,87,25,"db"],[93,43,87,27],[93,44,87,27,"db"],[93,46,87,27],[93,47,87,28,"getOnCallSchedule"],[93,64,87,45],[93,65,88,6,"now"],[93,68,88,9],[93,69,88,10,"toISOString"],[93,80,88,21],[93,81,88,22],[93,82,88,23],[93,83,88,24,"split"],[93,88,88,29],[93,89,88,30],[93,92,88,33],[93,93,88,34],[93,94,88,35],[93,95,88,36],[93,96,88,37],[93,98,89,6,"futureDate"],[93,108,89,16],[93,109,89,17,"toISOString"],[93,120,89,28],[93,121,89,29],[93,122,89,30],[93,123,89,31,"split"],[93,128,89,36],[93,129,89,37],[93,132,89,40],[93,133,89,41],[93,134,89,42],[93,135,89,43],[93,136,90,4],[93,137,90,5],[94,6,92,4],[94,12,92,10,"userShifts"],[94,22,92,20],[94,25,92,23,"shifts"],[94,31,92,29],[94,32,93,7,"filter"],[94,38,93,13],[94,39,93,15,"s"],[94,40,93,21],[94,44,93,26,"s"],[94,45,93,27],[94,46,93,28,"user_name"],[94,55,93,37],[94,60,93,42,"userName"],[94,68,93,50],[94,69,93,51],[94,70,94,7,"map"],[94,73,94,10],[94,74,94,12,"s"],[94,75,94,18],[94,79,94,23],[94,82,94,26,"s"],[94,83,94,27],[94,84,94,28,"start_date"],[94,94,94,38],[94,98,94,42,"s"],[94,99,94,43],[94,100,94,44,"end_date"],[94,108,94,52],[94,110,94,54],[94,111,94,55],[95,6,96,4],[95,13,96,11,"userShifts"],[95,23,96,21],[96,4,97,2],[96,5,97,3],[96,6,97,4],[96,13,97,11,"error"],[96,18,97,16],[96,20,97,18],[97,6,98,4,"console"],[97,13,98,11],[97,14,98,12,"error"],[97,19,98,17],[97,20,98,18],[97,48,98,46],[97,50,98,48,"error"],[97,55,98,53],[97,56,98,54],[98,6,99,4],[98,13,99,11],[98,15,99,13],[99,4,100,2],[100,2,101,0],[102,2,103,0],[103,0,104,0],[104,0,105,0],[105,2,106,0],[105,11,106,9,"shiftsChanged"],[105,24,106,22,"shiftsChanged"],[105,25,106,23,"before"],[105,31,106,39],[105,33,106,41,"after"],[105,38,106,56],[105,40,106,67],[106,4,107,2],[106,8,107,6,"before"],[106,14,107,12],[106,15,107,13,"length"],[106,21,107,19],[106,26,107,24,"after"],[106,31,107,29],[106,32,107,30,"length"],[106,38,107,36],[106,40,107,38],[106,47,107,45],[106,51,107,49],[107,4,109,2],[107,10,109,8,"beforeSet"],[107,19,109,17],[107,22,109,20],[107,26,109,24,"Set"],[107,29,109,27],[107,30,109,28,"before"],[107,36,109,34],[107,37,109,35],[108,4,110,2],[108,10,110,8,"afterSet"],[108,18,110,16],[108,21,110,19],[108,25,110,23,"Set"],[108,28,110,26],[108,29,110,27,"after"],[108,34,110,32],[108,35,110,33],[110,4,112,2],[111,4,113,2],[111,9,113,7],[111,15,113,13,"shift"],[111,20,113,18],[111,24,113,22,"before"],[111,30,113,28],[111,32,113,30],[112,6,114,4],[112,10,114,8],[112,11,114,9,"afterSet"],[112,19,114,17],[112,20,114,18,"has"],[112,23,114,21],[112,24,114,22,"shift"],[112,29,114,27],[112,30,114,28],[112,32,114,30],[112,39,114,37],[112,43,114,41],[113,4,115,2],[114,4,117,2],[114,9,117,7],[114,15,117,13,"shift"],[114,20,117,18],[114,24,117,22,"after"],[114,29,117,27],[114,31,117,29],[115,6,118,4],[115,10,118,8],[115,11,118,9,"beforeSet"],[115,20,118,18],[115,21,118,19,"has"],[115,24,118,22],[115,25,118,23,"shift"],[115,30,118,28],[115,31,118,29],[115,33,118,31],[115,40,118,38],[115,44,118,42],[116,4,119,2],[117,4,121,2],[117,11,121,9],[117,16,121,14],[118,2,122,0],[120,2,124,0],[121,0,125,0],[122,0,126,0],[123,2,127,0],[123,17,127,15,"performSync"],[123,28,127,26,"performSync"],[123,29,127,26],[123,31,127,50],[124,4,128,2],[124,8,128,6],[125,6,129,4,"console"],[125,13,129,11],[125,14,129,12,"log"],[125,17,129,15],[125,18,129,16],[125,44,129,42],[125,45,129,43],[126,6,131,4],[126,12,131,10,"db"],[126,28,131,12],[126,29,131,12,"db"],[126,31,131,12],[126,32,131,13,"initialize"],[126,42,131,23],[126,43,131,24],[126,44,131,25],[128,6,133,4],[129,6,134,4],[129,12,134,10,"currentUser"],[129,23,134,21],[129,26,134,24],[129,32,134,30,"db"],[129,48,134,32],[129,49,134,32,"db"],[129,51,134,32],[129,52,134,33,"getCurrentUser"],[129,66,134,47],[129,67,134,48],[129,68,134,49],[130,6,135,4],[130,10,135,8],[130,11,135,9,"currentUser"],[130,22,135,20],[130,24,135,22],[131,8,136,6,"console"],[131,15,136,13],[131,16,136,14,"log"],[131,19,136,17],[131,20,136,18],[131,61,136,59],[131,62,136,60],[132,8,137,6],[132,15,137,13],[133,10,137,15,"success"],[133,17,137,22],[133,19,137,24],[133,24,137,29],[134,10,137,31,"newEntriesCount"],[134,25,137,46],[134,27,137,48],[134,28,137,49],[135,10,137,51,"userShiftsChanged"],[135,27,137,68],[135,29,137,70],[135,34,137,75],[136,10,137,77,"error"],[136,15,137,82],[136,17,137,84],[137,8,137,105],[137,9,137,106],[138,6,138,4],[140,6,140,4],[141,6,141,4],[141,10,141,8,"syncUrl"],[141,17,141,15],[141,20,141,18],[141,26,141,24,"AsyncStorage"],[141,38,141,36],[141,39,141,36,"default"],[141,46,141,36],[141,47,141,37,"getItem"],[141,54,141,44],[141,55,141,45],[141,76,141,66],[141,77,141,67],[142,6,142,4],[142,10,142,8],[142,11,142,9,"syncUrl"],[142,18,142,16],[142,22,142,20,"syncUrl"],[142,29,142,27],[142,30,142,28,"trim"],[142,34,142,32],[142,35,142,33],[142,36,142,34],[142,41,142,39],[142,43,142,41],[142,45,142,43],[143,8,143,6,"syncUrl"],[143,15,143,13],[143,18,143,16,"DEFAULT_ONCALL_SCHEDULE_URL"],[143,34,143,43],[143,35,143,43,"DEFAULT_ONCALL_SCHEDULE_URL"],[143,62,143,43],[144,8,144,6,"console"],[144,15,144,13],[144,16,144,14,"log"],[144,19,144,17],[144,20,144,18],[144,58,144,56],[144,59,144,57],[145,6,145,4],[145,7,145,5],[145,13,145,11],[146,8,146,6,"console"],[146,15,146,13],[146,16,146,14,"log"],[146,19,146,17],[146,20,146,18],[146,64,146,62],[146,65,146,63],[147,6,147,4],[149,6,149,4],[150,6,150,4],[150,12,150,10,"shiftsBefore"],[150,24,150,22],[150,27,150,25],[150,33,150,31,"getUserShiftsBeforeSync"],[150,56,150,54],[150,57,150,55,"currentUser"],[150,68,150,66],[150,69,150,67,"user_name"],[150,78,150,76],[150,79,150,77],[151,6,151,4,"console"],[151,13,151,11],[151,14,151,12,"log"],[151,17,151,15],[151,18,151,16],[151,33,151,31,"shiftsBefore"],[151,45,151,43],[151,46,151,44,"length"],[151,52,151,50],[151,73,151,71],[151,74,151,72],[153,6,153,4],[154,6,154,4,"console"],[154,13,154,11],[154,14,154,12,"log"],[154,17,154,15],[154,18,154,16],[154,52,154,50],[154,53,154,51],[155,6,155,4],[155,12,155,10,"response"],[155,20,155,18],[155,23,155,21],[155,29,155,27,"fetch"],[155,34,155,32],[155,35,155,33,"syncUrl"],[155,42,155,40],[155,43,155,41],[156,6,157,4],[156,10,157,8],[156,11,157,9,"response"],[156,19,157,17],[156,20,157,18,"ok"],[156,22,157,20],[156,24,157,22],[157,8,158,6],[157,14,158,12],[157,18,158,16,"Error"],[157,23,158,21],[157,24,158,22],[157,32,158,30,"response"],[157,40,158,38],[157,41,158,39,"status"],[157,47,158,45],[157,52,158,50,"response"],[157,60,158,58],[157,61,158,59,"statusText"],[157,71,158,69],[157,73,158,71],[157,74,158,72],[158,6,159,4],[159,6,161,4],[159,12,161,10,"csvText"],[159,19,161,17],[159,22,161,20],[159,28,161,26,"response"],[159,36,161,34],[159,37,161,35,"text"],[159,41,161,39],[159,42,161,40],[159,43,161,41],[160,6,162,4,"console"],[160,13,162,11],[160,14,162,12,"log"],[160,17,162,15],[160,18,162,16],[160,46,162,44],[160,47,162,45],[162,6,164,4],[163,6,165,4],[163,12,165,10,"lines"],[163,17,165,15],[163,20,165,18,"csvText"],[163,27,165,25],[163,28,165,26,"trim"],[163,32,165,30],[163,33,165,31],[163,34,165,32],[163,35,165,33,"split"],[163,40,165,38],[163,41,165,39],[163,45,165,43],[163,46,165,44],[164,6,166,4],[164,12,166,10,"headers"],[164,19,166,17],[164,22,166,20,"lines"],[164,27,166,25],[164,28,166,26],[164,29,166,27],[164,30,166,28],[164,31,166,29,"split"],[164,36,166,34],[164,37,166,35],[164,40,166,38],[164,41,166,39],[164,42,166,40,"map"],[164,45,166,43],[164,46,166,44,"h"],[164,47,166,45],[164,51,166,49,"h"],[164,52,166,50],[164,53,166,51,"trim"],[164,57,166,55],[164,58,166,56],[164,59,166,57],[164,60,166,58],[165,6,168,4],[165,12,168,10,"scheduleData"],[165,24,168,29],[165,27,168,32],[165,29,168,34],[166,6,170,4],[166,11,170,9],[166,15,170,13,"i"],[166,16,170,14],[166,19,170,17],[166,20,170,18],[166,22,170,20,"i"],[166,23,170,21],[166,26,170,24,"lines"],[166,31,170,29],[166,32,170,30,"length"],[166,38,170,36],[166,40,170,38,"i"],[166,41,170,39],[166,43,170,41],[166,45,170,43],[167,8,171,6],[167,14,171,12,"values"],[167,20,171,18],[167,23,171,21,"lines"],[167,28,171,26],[167,29,171,27,"i"],[167,30,171,28],[167,31,171,29],[167,32,171,30,"split"],[167,37,171,35],[167,38,171,36],[167,41,171,39],[167,42,171,40],[167,43,171,41,"map"],[167,46,171,44],[167,47,171,45,"v"],[167,48,171,46],[167,52,171,50,"v"],[167,53,171,51],[167,54,171,52,"trim"],[167,58,171,56],[167,59,171,57],[167,60,171,58],[167,61,171,59],[168,8,172,6],[168,14,172,12,"row"],[168,17,172,20],[168,20,172,23],[168,21,172,24],[168,22,172,25],[169,8,174,6,"headers"],[169,15,174,13],[169,16,174,14,"forEach"],[169,23,174,21],[169,24,174,22],[169,25,174,23,"header"],[169,31,174,29],[169,33,174,31,"index"],[169,38,174,36],[169,43,174,41],[170,10,175,8,"row"],[170,13,175,11],[170,14,175,12,"header"],[170,20,175,18],[170,21,175,19],[170,24,175,22,"values"],[170,30,175,28],[170,31,175,29,"index"],[170,36,175,34],[170,37,175,35],[170,41,175,39],[170,43,175,41],[171,8,176,6],[171,9,176,7],[171,10,176,8],[172,8,178,6],[172,12,178,10,"row"],[172,15,178,13],[172,16,178,14,"start_date"],[172,26,178,24],[172,30,178,28,"row"],[172,33,178,31],[172,34,178,32,"end_date"],[172,42,178,40],[172,46,178,44,"row"],[172,49,178,47],[172,50,178,48,"user"],[172,54,178,52],[172,56,178,54],[173,10,179,8,"scheduleData"],[173,22,179,20],[173,23,179,21,"push"],[173,27,179,25],[173,28,179,26],[174,12,180,10,"start_date"],[174,22,180,20],[174,24,180,22,"row"],[174,27,180,25],[174,28,180,26,"start_date"],[174,38,180,36],[175,12,181,10,"end_date"],[175,20,181,18],[175,22,181,20,"row"],[175,25,181,23],[175,26,181,24,"end_date"],[175,34,181,32],[176,12,182,10,"user"],[176,16,182,14],[176,18,182,16,"row"],[176,21,182,19],[176,22,182,20,"user"],[176,26,182,24],[177,12,183,10,"notes"],[177,17,183,15],[177,19,183,17,"row"],[177,22,183,20],[177,23,183,21,"notes"],[177,28,183,26],[177,32,183,30],[178,10,184,8],[178,11,184,9],[178,12,184,10],[179,8,185,6],[180,6,186,4],[181,6,188,4,"console"],[181,13,188,11],[181,14,188,12,"log"],[181,17,188,15],[181,18,188,16],[181,31,188,29,"scheduleData"],[181,43,188,41],[181,44,188,42,"length"],[181,50,188,48],[181,69,188,67],[181,70,188,68],[183,6,190,4],[184,6,191,4,"console"],[184,13,191,11],[184,14,191,12,"log"],[184,17,191,15],[184,18,191,16],[184,53,191,51],[184,54,191,52],[185,6,192,4],[185,12,192,10,"db"],[185,28,192,12],[185,29,192,12,"db"],[185,31,192,12],[185,32,192,13,"clearOnCallSchedule"],[185,51,192,32],[185,52,192,33],[185,53,192,34],[186,6,194,4],[186,12,194,10,"db"],[186,28,194,12],[186,29,194,12,"db"],[186,31,194,12],[186,32,194,13,"importOnCallSchedule"],[186,52,194,33],[186,53,194,34,"scheduleData"],[186,65,194,46],[186,66,194,47],[188,6,196,4],[189,6,197,4],[189,12,197,10,"uniqueUsers"],[189,23,197,21],[189,26,197,24],[189,27,197,25],[189,30,197,28],[189,34,197,32,"Set"],[189,37,197,35],[189,38,197,36,"scheduleData"],[189,50,197,48],[189,51,197,49,"map"],[189,54,197,52],[189,55,197,53,"s"],[189,56,197,54],[189,60,197,58,"s"],[189,61,197,59],[189,62,197,60,"user"],[189,66,197,64],[189,67,197,65],[189,68,197,66],[189,69,197,67],[190,6,198,4],[190,11,198,9],[190,17,198,15,"user"],[190,21,198,19],[190,25,198,23,"uniqueUsers"],[190,36,198,34],[190,38,198,36],[191,8,199,6],[191,14,199,12,"db"],[191,30,199,14],[191,31,199,14,"db"],[191,33,199,14],[191,34,199,15,"addOnCallUser"],[191,47,199,28],[191,48,199,29,"user"],[191,52,199,33],[191,54,199,35],[191,59,199,40],[191,60,199,41],[192,6,200,4],[193,6,202,4,"console"],[193,13,202,11],[193,14,202,12,"log"],[193,17,202,15],[193,18,202,16],[193,52,202,50],[193,53,202,51],[195,6,204,4],[196,6,205,4],[196,12,205,10,"shiftsAfter"],[196,23,205,21],[196,26,205,24],[196,32,205,30,"getUserShiftsBeforeSync"],[196,55,205,53],[196,56,205,54,"currentUser"],[196,67,205,65],[196,68,205,66,"user_name"],[196,77,205,75],[196,78,205,76],[197,6,206,4,"console"],[197,13,206,11],[197,14,206,12,"log"],[197,17,206,15],[197,18,206,16],[197,33,206,31,"shiftsAfter"],[197,44,206,42],[197,45,206,43,"length"],[197,51,206,49],[197,71,206,69],[197,72,206,70],[198,6,208,4],[198,12,208,10,"userShiftsChanged"],[198,29,208,27],[198,32,208,30,"shiftsChanged"],[198,45,208,43],[198,46,208,44,"shiftsBefore"],[198,58,208,56],[198,60,208,58,"shiftsAfter"],[198,71,208,69],[198,72,208,70],[199,6,210,4],[199,10,210,8,"userShiftsChanged"],[199,27,210,25],[199,29,210,27],[200,8,211,6,"console"],[200,15,211,13],[200,16,211,14,"log"],[200,19,211,17],[200,20,211,18],[200,53,211,51],[200,54,211,52],[201,6,212,4],[201,7,212,5],[201,13,212,11],[202,8,213,6,"console"],[202,15,213,13],[202,16,213,14,"log"],[202,19,213,17],[202,20,213,18],[202,48,213,46],[202,49,213,47],[203,6,214,4],[205,6,216,4],[206,6,217,4],[206,12,217,10,"AsyncStorage"],[206,24,217,22],[206,25,217,22,"default"],[206,32,217,22],[206,33,217,23,"setItem"],[206,40,217,30],[206,41,217,31,"LAST_SYNC_KEY"],[206,54,217,44],[206,56,217,46],[206,60,217,50,"Date"],[206,64,217,54],[206,65,217,55],[206,66,217,56],[206,67,217,57,"toISOString"],[206,78,217,68],[206,79,217,69],[206,80,217,70],[206,81,217,71],[207,6,219,4],[207,13,219,11],[208,8,220,6,"success"],[208,15,220,13],[208,17,220,15],[208,21,220,19],[209,8,221,6,"newEntriesCount"],[209,23,221,21],[209,25,221,23,"scheduleData"],[209,37,221,35],[209,38,221,36,"length"],[209,44,221,42],[210,8,222,6,"userShiftsChanged"],[211,6,223,4],[211,7,223,5],[212,4,225,2],[212,5,225,3],[212,6,225,4],[212,13,225,11,"error"],[212,18,225,21],[212,20,225,23],[213,6,226,4,"console"],[213,13,226,11],[213,14,226,12,"error"],[213,19,226,17],[213,20,226,18],[213,41,226,39],[213,43,226,41,"error"],[213,48,226,46],[213,49,226,47],[214,6,227,4],[214,13,227,11],[215,8,228,6,"success"],[215,15,228,13],[215,17,228,15],[215,22,228,20],[216,8,229,6,"newEntriesCount"],[216,23,229,21],[216,25,229,23],[216,26,229,24],[217,8,230,6,"userShiftsChanged"],[217,25,230,23],[217,27,230,25],[217,32,230,30],[218,8,231,6,"error"],[218,13,231,11],[218,15,231,13,"error"],[218,20,231,18],[218,21,231,19,"message"],[219,6,232,4],[219,7,232,5],[220,4,233,2],[221,2,234,0],[223,2,236,0],[224,0,237,0],[225,0,238,0],[226,0,239,0],[227,2,240,0],[227,17,240,15,"notifyUserShiftsChanged"],[227,40,240,38,"notifyUserShiftsChanged"],[227,41,240,38],[227,43,240,56],[228,4,241,2],[229,4,242,2],[230,4,243,2,"console"],[230,11,243,9],[230,12,243,10,"log"],[230,15,243,13],[230,16,243,14],[230,82,243,80],[230,83,243,81],[231,2,244,0],[233,2,246,0],[234,0,247,0],[235,0,248,0],[236,2,249,7],[236,17,249,22,"checkAndSync"],[236,29,249,34,"checkAndSync"],[236,30,249,34],[236,32,249,65],[237,4,250,2],[237,8,250,6],[238,6,251,4],[239,6,252,4],[239,12,252,10,"enabled"],[239,19,252,17],[239,22,252,20],[239,28,252,26,"isAutoSyncEnabled"],[239,45,252,43],[239,46,252,44],[239,47,252,45],[240,6,253,4],[240,10,253,8],[240,11,253,9,"enabled"],[240,18,253,16],[240,20,253,18],[241,8,254,6,"console"],[241,15,254,13],[241,16,254,14,"log"],[241,19,254,17],[241,20,254,18],[241,46,254,44],[241,47,254,45],[242,8,255,6],[242,15,255,13],[242,19,255,17],[243,6,256,4],[245,6,258,4],[246,6,259,4],[246,12,259,10,"needed"],[246,18,259,16],[246,21,259,19],[246,27,259,25,"isSyncNeeded"],[246,39,259,37],[246,40,259,38],[246,41,259,39],[247,6,260,4],[247,10,260,8],[247,11,260,9,"needed"],[247,17,260,15],[247,19,260,17],[248,8,261,6,"console"],[248,15,261,13],[248,16,261,14,"log"],[248,19,261,17],[248,20,261,18],[248,44,261,42],[248,45,261,43],[249,8,262,6],[249,15,262,13],[249,19,262,17],[250,6,263,4],[252,6,265,4],[253,6,266,4,"console"],[253,13,266,11],[253,14,266,12,"log"],[253,17,266,15],[253,18,266,16],[253,42,266,40],[253,43,266,41],[254,6,267,4],[254,12,267,10,"result"],[254,18,267,16],[254,21,267,19],[254,27,267,25,"performSync"],[254,38,267,36],[254,39,267,37],[254,40,267,38],[256,6,269,4],[257,6,270,4],[257,10,270,8,"result"],[257,16,270,14],[257,17,270,15,"success"],[257,24,270,22],[257,28,270,26,"result"],[257,34,270,32],[257,35,270,33,"userShiftsChanged"],[257,52,270,50],[257,54,270,52],[258,8,271,6],[258,14,271,12,"notifyUserShiftsChanged"],[258,37,271,35],[258,38,271,36],[258,39,271,37],[259,6,272,4],[260,6,274,4],[260,13,274,11,"result"],[260,19,274,17],[261,4,276,2],[261,5,276,3],[261,6,276,4],[261,13,276,11,"error"],[261,18,276,16],[261,20,276,18],[262,6,277,4,"console"],[262,13,277,11],[262,14,277,12,"error"],[262,19,277,17],[262,20,277,18],[262,47,277,45],[262,49,277,47,"error"],[262,54,277,52],[262,55,277,53],[263,6,278,4],[263,13,278,11],[263,17,278,15],[264,4,279,2],[265,2,280,0],[267,2,282,0],[268,0,283,0],[269,0,284,0],[270,0,285,0],[271,2,286,7],[271,17,286,22,"clearSyncBadge"],[271,31,286,36,"clearSyncBadge"],[271,32,286,36],[271,34,286,54],[272,4,287,2],[273,4,288,2,"console"],[273,11,288,9],[273,12,288,10,"log"],[273,15,288,13],[273,16,288,14],[273,55,288,53],[273,56,288,54],[274,2,289,0],[275,0,289,1],[275,3]],"functionMap":{"names":["<global>","isAutoSyncEnabled","setAutoSyncEnabled","getLastSyncTime","isSyncNeeded","getUserShiftsBeforeSync","shifts.filter$argument_0","shifts.filter.map$argument_0","shiftsChanged","performSync","lines._.split.map$argument_0","lines.i.split.map$argument_0","headers.forEach$argument_0","scheduleData.map$argument_0","notifyUserShiftsChanged","checkAndSync","clearSyncBadge"],"mappings":"AAA;OCuB;CDQ;OEK;CFO;OGK;CHQ;OIK;CJa;AKK;cCa,oCD;WEC,2CF;CLO;AQK;CRgB;ASK;4CCuC,aD;6CEK,aF;sBGG;OHE;qDIqB,WJ;CTqC;AcM;CdI;OeK;Cf+B;OgBM;ChBG"},"hasCjsExports":false},"type":"js/module"}]}