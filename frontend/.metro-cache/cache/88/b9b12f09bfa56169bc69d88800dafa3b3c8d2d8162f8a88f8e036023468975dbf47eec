{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"./databaseWrapper","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":39,"index":39}}],"key":"MUXmcyigDhda3+oXopwCcUAp8ZU=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":40},"end":{"line":2,"column":39,"index":79}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.migrateDataFromBackend = migrateDataFromBackend;\n  exports.checkMigrationNeeded = checkMigrationNeeded;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoVirtualEnv = require(_dependencyMap[1], \"expo/virtual/env\");\n  var _databaseWrapper = require(_dependencyMap[2], \"./databaseWrapper\");\n  var _expoConstants = require(_dependencyMap[3], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var BACKEND_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  function migrateDataFromBackend() {\n    return _migrateDataFromBackend.apply(this, arguments);\n  }\n  function _migrateDataFromBackend() {\n    _migrateDataFromBackend = (0, _asyncToGenerator.default)(function* () {\n      try {\n        console.log('üîÑ Starting data migration from backend...');\n\n        // Fetch all data from backend\n        var response = yield fetch(`${BACKEND_URL}/api/export`);\n        if (!response.ok) {\n          throw new Error(`Backend export failed: ${response.statusText}`);\n        }\n        var backendData = yield response.json();\n        console.log(`üì¶ Fetched ${backendData.time_entries?.length || 0} time entries`);\n        console.log(`üì¶ Fetched ${backendData.line_codes?.length || 0} line codes`);\n        console.log(`üì¶ Fetched ${backendData.settings?.length || 0} settings`);\n\n        // Import data into local database\n        yield _databaseWrapper.db.importData(backendData);\n        console.log('‚úÖ Migration completed successfully');\n        return {\n          success: true,\n          message: `Migrated ${backendData.time_entries?.length || 0} time entries from server`\n        };\n      } catch (error) {\n        console.error('‚ùå Migration failed:', error);\n        return {\n          success: false,\n          message: `Migration failed: ${error.message}`\n        };\n      }\n    });\n    return _migrateDataFromBackend.apply(this, arguments);\n  }\n  function checkMigrationNeeded() {\n    return _checkMigrationNeeded.apply(this, arguments);\n  }\n  function _checkMigrationNeeded() {\n    _checkMigrationNeeded = (0, _asyncToGenerator.default)(function* () {\n      try {\n        // Check if local database has any time entries\n        var entries = yield _databaseWrapper.db.getAllLines();\n\n        // If we have default lines but no custom data, migration might be needed\n        // This is a simple check - you might want to add more sophisticated logic\n        return entries.length <= 10; // Only default lines exist\n      } catch (error) {\n        console.error('Error checking migration status:', error);\n        return false;\n      }\n    });\n    return _checkMigrationNeeded.apply(this, arguments);\n  }\n});","lineCount":75,"map":[[12,2,6,0,"exports"],[12,9,6,0],[12,10,6,0,"migrateDataFromBackend"],[12,32,6,0],[12,35,6,0,"migrateDataFromBackend"],[12,57,6,0],[13,2,41,0,"exports"],[13,9,41,0],[13,10,41,0,"checkMigrationNeeded"],[13,30,41,0],[13,33,41,0,"checkMigrationNeeded"],[13,53,41,0],[14,2,53,1],[14,6,53,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,42,53,1],[14,45,53,1,"require"],[14,52,53,1],[14,53,53,1,"_dependencyMap"],[14,67,53,1],[15,2,53,1],[15,6,53,1,"_asyncToGenerator"],[15,23,53,1],[15,26,53,1,"_interopDefault"],[15,41,53,1],[15,42,53,1,"_babelRuntimeHelpersAsyncToGenerator"],[15,78,53,1],[16,2,53,1],[16,6,53,1,"_expoVirtualEnv"],[16,21,53,1],[16,24,53,1,"require"],[16,31,53,1],[16,32,53,1,"_dependencyMap"],[16,46,53,1],[17,2,1,0],[17,6,1,0,"_databaseWrapper"],[17,22,1,0],[17,25,1,0,"require"],[17,32,1,0],[17,33,1,0,"_dependencyMap"],[17,47,1,0],[18,2,2,0],[18,6,2,0,"_expoConstants"],[18,20,2,0],[18,23,2,0,"require"],[18,30,2,0],[18,31,2,0,"_dependencyMap"],[18,45,2,0],[19,2,2,0],[19,6,2,0,"Constants"],[19,15,2,0],[19,18,2,0,"_interopDefault"],[19,33,2,0],[19,34,2,0,"_expoConstants"],[19,48,2,0],[20,2,4,0],[20,6,4,6,"BACKEND_URL"],[20,17,4,17],[20,20,4,20,"Constants"],[20,29,4,29],[20,30,4,29,"default"],[20,37,4,29],[20,38,4,30,"expoConfig"],[20,48,4,40],[20,50,4,42,"extra"],[20,55,4,47],[20,57,4,49,"EXPO_PUBLIC_BACKEND_URL"],[20,80,4,72],[20,84,4,72,"_expoVirtualEnv"],[20,99,4,72],[20,100,4,72,"env"],[20,103,4,72],[20,104,4,72,"EXPO_PUBLIC_BACKEND_URL"],[20,127,4,111],[20,131,4,115],[20,133,4,117],[21,2,4,118],[21,11,6,22,"migrateDataFromBackend"],[21,33,6,44,"migrateDataFromBackend"],[21,34,6,44],[22,4,6,44],[22,11,6,44,"_migrateDataFromBackend"],[22,34,6,44],[22,35,6,44,"apply"],[22,40,6,44],[22,47,6,44,"arguments"],[22,56,6,44],[23,2,6,44],[24,2,6,44],[24,11,6,44,"_migrateDataFromBackend"],[24,35,6,44],[25,4,6,44,"_migrateDataFromBackend"],[25,27,6,44],[25,34,6,44,"_asyncToGenerator"],[25,51,6,44],[25,52,6,44,"default"],[25,59,6,44],[25,61,6,7],[25,74,6,95],[26,6,7,2],[26,10,7,6],[27,8,8,4,"console"],[27,15,8,11],[27,16,8,12,"log"],[27,19,8,15],[27,20,8,16],[27,64,8,60],[27,65,8,61],[29,8,10,4],[30,8,11,4],[30,12,11,10,"response"],[30,20,11,18],[30,29,11,27,"fetch"],[30,34,11,32],[30,35,11,33],[30,38,11,36,"BACKEND_URL"],[30,49,11,47],[30,62,11,60],[30,63,11,61],[31,8,13,4],[31,12,13,8],[31,13,13,9,"response"],[31,21,13,17],[31,22,13,18,"ok"],[31,24,13,20],[31,26,13,22],[32,10,14,6],[32,16,14,12],[32,20,14,16,"Error"],[32,25,14,21],[32,26,14,22],[32,52,14,48,"response"],[32,60,14,56],[32,61,14,57,"statusText"],[32,71,14,67],[32,73,14,69],[32,74,14,70],[33,8,15,4],[34,8,17,4],[34,12,17,10,"backendData"],[34,23,17,21],[34,32,17,30,"response"],[34,40,17,38],[34,41,17,39,"json"],[34,45,17,43],[34,46,17,44],[34,47,17,45],[35,8,19,4,"console"],[35,15,19,11],[35,16,19,12,"log"],[35,19,19,15],[35,20,19,16],[35,34,19,30,"backendData"],[35,45,19,41],[35,46,19,42,"time_entries"],[35,58,19,54],[35,60,19,56,"length"],[35,66,19,62],[35,70,19,66],[35,71,19,67],[35,86,19,82],[35,87,19,83],[36,8,20,4,"console"],[36,15,20,11],[36,16,20,12,"log"],[36,19,20,15],[36,20,20,16],[36,34,20,30,"backendData"],[36,45,20,41],[36,46,20,42,"line_codes"],[36,56,20,52],[36,58,20,54,"length"],[36,64,20,60],[36,68,20,64],[36,69,20,65],[36,82,20,78],[36,83,20,79],[37,8,21,4,"console"],[37,15,21,11],[37,16,21,12,"log"],[37,19,21,15],[37,20,21,16],[37,34,21,30,"backendData"],[37,45,21,41],[37,46,21,42,"settings"],[37,54,21,50],[37,56,21,52,"length"],[37,62,21,58],[37,66,21,62],[37,67,21,63],[37,78,21,74],[37,79,21,75],[39,8,23,4],[40,8,24,4],[40,14,24,10,"db"],[40,30,24,12],[40,31,24,12,"db"],[40,33,24,12],[40,34,24,13,"importData"],[40,44,24,23],[40,45,24,24,"backendData"],[40,56,24,35],[40,57,24,36],[41,8,26,4,"console"],[41,15,26,11],[41,16,26,12,"log"],[41,19,26,15],[41,20,26,16],[41,56,26,52],[41,57,26,53],[42,8,28,4],[42,15,28,11],[43,10,29,6,"success"],[43,17,29,13],[43,19,29,15],[43,23,29,19],[44,10,30,6,"message"],[44,17,30,13],[44,19,30,15],[44,31,30,27,"backendData"],[44,42,30,38],[44,43,30,39,"time_entries"],[44,55,30,51],[44,57,30,53,"length"],[44,63,30,59],[44,67,30,63],[44,68,30,64],[45,8,31,4],[45,9,31,5],[46,6,32,2],[46,7,32,3],[46,8,32,4],[46,15,32,11,"error"],[46,20,32,16],[46,22,32,18],[47,8,33,4,"console"],[47,15,33,11],[47,16,33,12,"error"],[47,21,33,17],[47,22,33,18],[47,43,33,39],[47,45,33,41,"error"],[47,50,33,46],[47,51,33,47],[48,8,34,4],[48,15,34,11],[49,10,35,6,"success"],[49,17,35,13],[49,19,35,15],[49,24,35,20],[50,10,36,6,"message"],[50,17,36,13],[50,19,36,15],[50,40,36,36,"error"],[50,45,36,41],[50,46,36,42,"message"],[50,53,36,49],[51,8,37,4],[51,9,37,5],[52,6,38,2],[53,4,39,0],[53,5,39,1],[54,4,39,1],[54,11,39,1,"_migrateDataFromBackend"],[54,34,39,1],[54,35,39,1,"apply"],[54,40,39,1],[54,47,39,1,"arguments"],[54,56,39,1],[55,2,39,1],[56,2,39,1],[56,11,41,22,"checkMigrationNeeded"],[56,31,41,42,"checkMigrationNeeded"],[56,32,41,42],[57,4,41,42],[57,11,41,42,"_checkMigrationNeeded"],[57,32,41,42],[57,33,41,42,"apply"],[57,38,41,42],[57,45,41,42,"arguments"],[57,54,41,42],[58,2,41,42],[59,2,41,42],[59,11,41,42,"_checkMigrationNeeded"],[59,33,41,42],[60,4,41,42,"_checkMigrationNeeded"],[60,25,41,42],[60,32,41,42,"_asyncToGenerator"],[60,49,41,42],[60,50,41,42,"default"],[60,57,41,42],[60,59,41,7],[60,72,41,63],[61,6,42,2],[61,10,42,6],[62,8,43,4],[63,8,44,4],[63,12,44,10,"entries"],[63,19,44,17],[63,28,44,26,"db"],[63,44,44,28],[63,45,44,28,"db"],[63,47,44,28],[63,48,44,29,"getAllLines"],[63,59,44,40],[63,60,44,41],[63,61,44,42],[65,8,46,4],[66,8,47,4],[67,8,48,4],[67,15,48,11,"entries"],[67,22,48,18],[67,23,48,19,"length"],[67,29,48,25],[67,33,48,29],[67,35,48,31],[67,36,48,32],[67,37,48,33],[68,6,49,2],[68,7,49,3],[68,8,49,4],[68,15,49,11,"error"],[68,20,49,16],[68,22,49,18],[69,8,50,4,"console"],[69,15,50,11],[69,16,50,12,"error"],[69,21,50,17],[69,22,50,18],[69,56,50,52],[69,58,50,54,"error"],[69,63,50,59],[69,64,50,60],[70,8,51,4],[70,15,51,11],[70,20,51,16],[71,6,52,2],[72,4,53,0],[72,5,53,1],[73,4,53,1],[73,11,53,1,"_checkMigrationNeeded"],[73,32,53,1],[73,33,53,1,"apply"],[73,38,53,1],[73,45,53,1,"arguments"],[73,54,53,1],[74,2,53,1],[75,0,53,1],[75,3]],"functionMap":{"names":["<global>","migrateDataFromBackend","checkMigrationNeeded"],"mappings":"AAA;OCK;CDiC;OEE;CFY"},"hasCjsExports":false},"type":"js/module"}]}